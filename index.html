<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Devicetree Specification v0.4-10-g27db084 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <script src="_static/documentation_options.js?v=b6becc6a"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="icon" href="_static/devicetree-favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="spec-fullname-specversion">
<h1>Devicetree Specification v0.4-10-g27db084<a class="headerlink" href="#spec-fullname-specversion" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-license"></span><p><strong>Copyright</strong></p>
<div class="line-block">
<div class="line">Copyright 2008,2011 Power.org, Inc.</div>
<div class="line">Copyright 2008,2011 Freescale Semiconductor, Inc.</div>
<div class="line">Copyright 2008,2011 International Business Machines Corporation.</div>
<div class="line">Copyright 2016,2017 Linaro, Ltd.</div>
<div class="line">Copyright 2016-2021 Arm, Ltd.</div>
</div>
<p>The Linaro and devicetree.org word marks and the Linaro and
devicetree.org logos and related marks are trademarks and service marks
licensed by Linaro Ltd. Implementation of certain elements of this
document may require licenses under third party intellectual property
rights, including without limitation, patent rights. Linaro and its
Members are not, and shall not be held, responsible in any manner for
identifying or failing to identify any or all such third party
intellectual property rights.</p>
<p>The Power Architecture and Power.org word marks and the Power and
Power.org logos and related marks are trademarks and service marks
licensed by Power.org. Implementation of certain elements of this
document may require licenses under third party intellectual property
rights, including without limitation, patent rights. Power.org and its
Members are not, and shall not be held, responsible in any manner for
identifying or failing to identify any or all such third party
intellectual property rights.</p>
<p>THIS SPECIFICATION PROVIDED “AS IS” AND WITHOUT ANY WARRANTY
OF ANY KIND, INCLUDING, WITHOUT LIMITATION, ANY EXPRESS OR IMPLIED
WARRANTY OF NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A
PARTICULAR PURPOSE. IN NO EVENT SHALL LINARO OR ANY MEMBER OF
LINARO BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, EXEMPLARY,
PUNITIVE, OR CONSEQUENTIAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST
PROFITS, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>
<p>Questions pertaining to this document, or the terms or conditions of its
provision, should be addressed to:</p>
<div class="line-block">
<div class="line">Linaro, Ltd</div>
<div class="line">Harston Mill,</div>
<div class="line">Royston Road,</div>
<div class="line">Harston CB22 7GG</div>
<div class="line">Attn: Devicetree.org Board Secretary</div>
</div>
<p><strong>License Information</strong></p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<span id="document-acknowledgements"></span><p><strong>Acknowledgements</strong></p>
<p>The devicetree.org Technical Steering Committee would like to
thank the many individuals and companies that contributed to the
development of this specification through writing, technical discussions
and reviews.</p>
<p>We want to thank the power.org Platform Architecture Technical Subcommittee who
developed and published ePAPR. The text of ePAPR was used as the starting
point for this document.</p>
<p>Significant aspects of the Devicetree Specification are based on work done by
the Open Firmware Working Group which developed bindings for IEEE-1275.
We would like to acknowledge their contributions.</p>
<p>We would also like to acknowledge the contribution of the PowerPC and ARM Linux
communities that developed and implemented the flattened devicetree concept.</p>
<span id="document-revhistory"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Revision History</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Revision</p></th>
<th class="head"><p>Date</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.1</p></td>
<td><p>2016-MAY-24</p></td>
<td><p>Initial prerelease version. Imported ePAPR text
into reStructured Text format and removed Power ISA
specific elements.</p></td>
</tr>
<tr class="row-odd"><td><p>0.2</p></td>
<td><p>2017-DEC-20</p></td>
<td><ul class="simple">
<li><p>Added more recommended generic node names</p></li>
<li><p>Added interrupts-extended</p></li>
<li><p>Additional phy times</p></li>
<li><p>Filled out detail in source language chapter</p></li>
<li><p>Editorial changes</p></li>
<li><p>Added changebar version to release documents</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>0.3</p></td>
<td><p>2020-FEB-13</p></td>
<td><ul class="simple">
<li><p>Added more recommended generic node names</p></li>
<li><p>Document generic nexus binding</p></li>
<li><p>codespell support and spelling fixes</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<span id="document-chapter1-introduction"></span><section id="introduction">
<span id="chapter-introduction"></span><h2><span class="section-number">1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<section id="purpose-and-scope">
<h3><span class="section-number">1.1. </span>Purpose and Scope<a class="headerlink" href="#purpose-and-scope" title="Link to this heading">¶</a></h3>
<p>To initialize and boot a computer system, various software components
interact. Firmware might perform low-level initialization of the system
hardware before passing control to software such as an operating system,
bootloader, or hypervisor. Bootloaders and hypervisors can, in turn,
load and transfer control to operating systems. Standard, consistent
interfaces and conventions facilitate the interactions between these
software components.  In this document the term <em>boot program</em> is used to
generically refer to a software component that initializes the system
state and executes another software component referred to as a <em>client
program</em>. Examples of a boot program include: firmware, bootloaders, and
hypervisors. Examples of a client program include: bootloaders,
hypervisors, operating systems, and special purpose programs. A piece of
software may be both a client program and a boot program  (e.g. a hypervisor).</p>
<p>This specification, the Devicetree Specification (DTSpec),
provides a complete boot program to client program
interface definition, combined with minimum system requirements that
facilitate the development of a wide variety of systems.</p>
<p>This specification is targeted towards the requirements of embedded
systems. An embedded system typically consists of system hardware, an
operating system, and application software that are custom designed to
perform a fixed, specific set of tasks. This is unlike general purpose
computers, which are designed to be customized by a user with a variety
of software and I/O devices. Other characteristics of embedded systems
may include:</p>
<ul class="simple">
<li><p>a fixed set of I/O devices, possibly highly customized for the
application</p></li>
<li><p>a system board optimized for size and cost</p></li>
<li><p>limited user interface</p></li>
<li><p>resource constraints like limited memory and limited nonvolatile storage</p></li>
<li><p>real-time constraints</p></li>
<li><p>use of a wide variety of operating systems, including Linux,
real-time operating systems, and custom or proprietary operating
systems</p></li>
</ul>
<p><strong>Organization of this Document</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#chapter-introduction"><span class="std std-numref">Chapter 1</span></a> introduces the architecture being
specified by DTSpec.</p></li>
<li><p><a class="reference internal" href="#document-chapter2-devicetree-basics#chapter-devicetree"><span class="std std-numref">Chapter 2</span></a> introduces the devicetree concept
and describes its logical structure and standard properties.</p></li>
<li><p><a class="reference internal" href="#document-chapter3-devicenodes#chapter-device-node-requirements"><span class="std std-numref">Chapter 3</span></a> specifies the
definition of a base set of device nodes required by DTSpec-compliant
devicetrees.</p></li>
<li><p><a class="reference internal" href="#document-chapter4-device-bindings#chapter-device-bindings"><span class="std std-numref">Chapter 4</span></a> describes device bindings for
certain classes of devices and specific device types.</p></li>
<li><p><a class="reference internal" href="#document-chapter5-flattened-format#chapter-fdt-structure"><span class="std std-numref">Chapter 5</span></a> specifies the DTB encoding of devicetrees.</p></li>
<li><p><a class="reference internal" href="#document-chapter6-source-language#chapter-devicetree-source-format"><span class="std std-numref">Chapter 6</span></a> specifies the DTS source language.</p></li>
</ul>
<p><strong>Conventions Used in this Document</strong></p>
<p>The word <em>shall</em> is used to indicate mandatory requirements strictly to
be followed in order to conform to the standard and from which no
deviation is permitted (<em>shall</em> equals <em>is required to</em>).</p>
<p>The word <em>should</em> is used to indicate that among several possibilities
one is recommended as particularly suitable, without mentioning or
excluding others; or that a certain course of action is preferred but
not necessarily required; or that (in the negative form) a certain
course of action is deprecated but not prohibited (<em>should</em> equals <em>is
recommended that</em>).</p>
<p>The word <em>may</em> is used to indicate a course of action permissible within
the limits of the standard (<em>may</em> equals <em>is permitted</em>).</p>
<p>Examples of devicetree constructs are frequently shown in <em>Devicetree
Syntax</em> form. See <a class="reference internal" href="#document-chapter6-source-language#chapter-devicetree-source-format"><span class="std std-numref">Section 6</span></a> for
an overview of this syntax.</p>
</section>
<section id="relationship-to-ieee-1275-and-epapr">
<h3><span class="section-number">1.2. </span>Relationship to IEEE™ 1275 and ePAPR<a class="headerlink" href="#relationship-to-ieee-1275-and-epapr" title="Link to this heading">¶</a></h3>
<p>DTSpec is loosely related to the IEEE 1275 Open Firmware
standard—<em>IEEE Standard for Boot (Initialization Configuration)
Firmware: Core Requirements and Practices</em> <a class="reference internal" href="#document-references#ieee1275" id="id1"><span>[IEEE1275]</span></a>.</p>
<p>The original IEEE 1275 specification and its derivatives such as CHRP <a class="reference internal" href="#document-references#chrp" id="id2"><span>[CHRP]</span></a>
and PAPR <a class="reference internal" href="#document-references#papr" id="id3"><span>[PAPR]</span></a> address problems of general purpose computers, such as how a
single version of an operating system can work on several different
computers within the same family and the problem of loading an operating
system from user-installed I/O devices.</p>
<p>Because of the nature of embedded systems, some of these problems faced
by open, general purpose computers do not apply. Notable features of the
IEEE 1275 specification that are omitted from the DTSpec include:</p>
<ul class="simple">
<li><p>Plug-in device drivers</p></li>
<li><p>FCode</p></li>
<li><p>The programmable Open Firmware user interface based on Forth</p></li>
<li><p>FCode debugging</p></li>
<li><p>Operating system debugging</p></li>
</ul>
<p>What is retained from IEEE 1275 are concepts from the devicetree
architecture by which a boot program can describe and communicate system
hardware information to a client program, thus eliminating the need for
the client program to have hard-coded descriptions of system hardware.</p>
<p>This specification partially supersedes the ePAPR <a class="reference internal" href="#document-references#epapr" id="id4"><span>[EPAPR]</span></a> specification.
ePAPR documents how devicetree is used by the Power ISA, and covers both
general concepts, as well as Power ISA specific bindings.
The text of this document was derived from ePAPR, but either removes architecture specific bindings, or moves them into an appendix.</p>
</section>
<section id="bit-and-64-bit-support">
<h3><span class="section-number">1.3. </span>32-bit and 64-bit Support<a class="headerlink" href="#bit-and-64-bit-support" title="Link to this heading">¶</a></h3>
<p>The DTSpec supports CPUs with both 32-bit and 64-bit addressing
capabilities. Where applicable, sections of the DTSpec describe any
requirements or considerations for 32-bit and 64-bit addressing.</p>
</section>
<section id="definition-of-terms">
<h3><span class="section-number">1.4. </span>Definition of Terms<a class="headerlink" href="#definition-of-terms" title="Link to this heading">¶</a></h3>
<dl class="simple glossary">
<dt id="term-AMP">AMP<a class="headerlink" href="#term-AMP" title="Link to this term">¶</a></dt><dd><p>Asymmetric Multiprocessing. Computer available CPUs are partitioned into
groups, each running a distinct operating system image. The CPUs
may or may not be identical.</p>
</dd>
<dt id="term-boot-CPU">boot CPU<a class="headerlink" href="#term-boot-CPU" title="Link to this term">¶</a></dt><dd><p>The first CPU which a boot program directs to a client program’s
entry point.</p>
</dd>
<dt id="term-Book-III-E">Book III-E<a class="headerlink" href="#term-Book-III-E" title="Link to this term">¶</a></dt><dd><p>Embedded Environment. Section of the Power ISA defining supervisor
instructions and related facilities used in embedded Power processor
implementations.</p>
</dd>
<dt id="term-boot-program">boot program<a class="headerlink" href="#term-boot-program" title="Link to this term">¶</a></dt><dd><p>Used to generically refer to a software component that initializes
the system state and executes another software component referred to
as a client program. Examples of a boot program include: firmware,
bootloaders, and hypervisors.</p>
</dd>
<dt id="term-client-program">client program<a class="headerlink" href="#term-client-program" title="Link to this term">¶</a></dt><dd><p>Program that typically contains application or operating system
software. Examples of a client program include: bootloaders,
hypervisors, operating systems, and special purpose programs.</p>
</dd>
<dt id="term-cell">cell<a class="headerlink" href="#term-cell" title="Link to this term">¶</a></dt><dd><p>A unit of information consisting of 32 bits.</p>
</dd>
<dt id="term-DMA">DMA<a class="headerlink" href="#term-DMA" title="Link to this term">¶</a></dt><dd><p>Direct memory access</p>
</dd>
<dt id="term-DTB">DTB<a class="headerlink" href="#term-DTB" title="Link to this term">¶</a></dt><dd><p>Devicetree blob. Compact binary representation of the devicetree.</p>
</dd>
<dt id="term-DTC">DTC<a class="headerlink" href="#term-DTC" title="Link to this term">¶</a></dt><dd><p>Devicetree compiler. An open source tool used to create DTB files
from DTS files.</p>
</dd>
<dt id="term-DTS">DTS<a class="headerlink" href="#term-DTS" title="Link to this term">¶</a></dt><dd><p>Devicetree syntax. A textual representation of a devicetree
consumed by the DTC. See Appendix A Devicetree Source Format
(version 1).</p>
</dd>
<dt id="term-effective-address">effective address<a class="headerlink" href="#term-effective-address" title="Link to this term">¶</a></dt><dd><p>Memory address as computed by processor storage access or branch
instruction.</p>
</dd>
<dt id="term-physical-address">physical address<a class="headerlink" href="#term-physical-address" title="Link to this term">¶</a></dt><dd><p>Address used by the processor to access external device, typically a
memory controller.</p>
</dd>
<dt id="term-Power-ISA">Power ISA<a class="headerlink" href="#term-Power-ISA" title="Link to this term">¶</a></dt><dd><p>Power Instruction Set Architecture.</p>
</dd>
<dt id="term-interrupt-specifier">interrupt specifier<a class="headerlink" href="#term-interrupt-specifier" title="Link to this term">¶</a></dt><dd><p>A property value that describes an interrupt. Typically information
that specifies an interrupt number and sensitivity and triggering
mechanism is included.</p>
</dd>
<dt id="term-secondary-CPU">secondary CPU<a class="headerlink" href="#term-secondary-CPU" title="Link to this term">¶</a></dt><dd><p>CPUs other than the boot CPU that belong to the client program are
considered <em>secondary CPUs</em>.</p>
</dd>
<dt id="term-SMP">SMP<a class="headerlink" href="#term-SMP" title="Link to this term">¶</a></dt><dd><p>Symmetric multiprocessing. A computer architecture where two or more
identical CPUs can share memory and IO and operate under a single operating
system.</p>
</dd>
<dt id="term-SoC">SoC<a class="headerlink" href="#term-SoC" title="Link to this term">¶</a></dt><dd><p>System on a chip. A single computer chip integrating one or more CPU
core as well as number of other peripherals.</p>
</dd>
<dt id="term-unit-address">unit address<a class="headerlink" href="#term-unit-address" title="Link to this term">¶</a></dt><dd><p>The part of a node name specifying the node’s address in the address
space of the parent node.</p>
</dd>
<dt id="term-quiescent-CPU">quiescent CPU<a class="headerlink" href="#term-quiescent-CPU" title="Link to this term">¶</a></dt><dd><p>A quiescent CPU is in a state where it cannot interfere with the
normal operation of other CPUs, nor can its state be affected by the
normal operation of other running CPUs, except by an explicit method
for enabling or re-enabling the quiescent CPU.</p>
</dd>
</dl>
</section>
</section>
<span id="document-chapter2-devicetree-basics"></span><section id="the-devicetree">
<span id="chapter-devicetree"></span><h2><span class="section-number">2. </span>The Devicetree<a class="headerlink" href="#the-devicetree" title="Link to this heading">¶</a></h2>
<section id="overview">
<h3><span class="section-number">2.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<p>DTSpec specifies a construct called a <em>devicetree</em> to describe
system hardware. A boot program loads a devicetree into a client
program’s memory and passes a pointer to the devicetree to the client.</p>
<p>This chapter describes the logical structure of the devicetree and
specifies a base set of properties for use in describing device nodes.
<a class="reference internal" href="#document-chapter3-devicenodes#chapter-device-node-requirements"><span class="std std-numref">Chapter 3</span></a> specifies certain device nodes
required by a DTSpec-compliant
devicetree. <a class="reference internal" href="#document-chapter4-device-bindings#chapter-device-bindings"><span class="std std-numref">Chapter 4</span></a> describes the
DTSpec-defined device bindings – the requirements for representing
certain device types or classes of devices.
<a class="reference internal" href="#document-chapter5-flattened-format#chapter-fdt-structure"><span class="std std-numref">Chapter 5</span></a> describes the in-memory encoding of the devicetree.</p>
<p>A devicetree is a tree data structure with nodes that describe the
devices in a system. Each node has property/value pairs that describe
the characteristics of the device being represented. Each node has
exactly one parent except for the root node, which has no parent.</p>
<p>A device in this context may be an actual hardware device, such as a UART. It
may be part of a hardware device, such as the random-number generator in a TPM.
It may also be a device provided through virtualisation, such as a protocol
providing access to an I2C device attached to a remote CPU. A device may include
functions implemented by firmware running in higher privilege levels or remote
processors. There is no requirement that nodes in a device tree be a physical
hardware device, but generally they have some correlation to physical hardware
devices. Nodes should not be designed for OS- or project- specific purposes.
They should describe something which can be implemented by any OS or project.</p>
<p>A devicetree is often used to describe devices which cannot necessarily be
dynamically detected by a client program. For example, the architecture of PCI
enables a client to probe and detect attached devices and thus devicetree nodes
describing PCI devices might not be required. However, a device node is often
used to describe a PCI host bridge device in the system. This node is required if
the bridge cannot be detected by probing, but is otherwise optional. Also, a
bootloader may do PCI probing and produce a device tree containing the results
of its scan, for passing to the Operating System.</p>
<p><strong>Example</strong></p>
<p><a class="reference internal" href="#example-simple-devicetree"><span class="std std-numref">Fig. 2.1</span></a> shows an example representation of a
simple devicetree that is nearly
complete enough to boot a simple operating system, with the platform
type, CPU, memory, and a single UART described. Device nodes are shown
with properties and values inside each node.</p>
<figure class="align-default" id="id3">
<span id="example-simple-devicetree"></span><div class="graphviz"><img src="_images/graphviz-2c7b331e6f0c1cfad4cf0d5f764c319f0afc1b24.png" alt="digraph tree {
rankdir = LR;
ranksep = equally;
size = &quot;6,8&quot;
node [ shape=&quot;Mrecord&quot;; width=&quot;3.5&quot;; fontname = Courier; ];

&quot;/&quot; [ label = &quot;\N |
model=\&quot;fsl,mpc8572ds\&quot;\l
compatible=\&quot;fsl,mpc8572ds\&quot;\l
#address-cells=\&lt;1\&gt;\l
#size-cells=\&lt;1\&gt;\l&quot;]

&quot;cpus&quot; [ label=&quot;\N |
#address-cells=\&lt;1\&gt;\l
#size-cells=\&lt;0\&gt;\l&quot;]

&quot;cpu&#64;0&quot; [ label=&quot;\N |
device_type=\&quot;cpu\&quot;\l
reg=\&lt;0\&gt;\l
timebase-frequency=\&lt;825000000\&gt;\l
clock-frequency=\&lt;825000000\&gt;\l&quot;]

&quot;cpu&#64;1&quot; [ label=&quot;\N |
device_type=\&quot;cpu\&quot;\l
reg=\&lt;1\&gt;\l
timebase-frequency=\&lt;825000000\&gt;\l
clock-frequency=\&lt;825000000\&gt;\l&quot;]

&quot;memory&#64;0&quot; [ label=&quot;\N |
device_type=\&quot;memory\&quot;\l
reg=\&lt;0 0x20000000\&gt;\l&quot;]

&quot;uart&#64;fe001000&quot; [ label=&quot;\N |
compatible=\&quot;ns16550\&quot;\l
reg=\&lt;0xfe001000 0x100\&gt;\l&quot;]

&quot;chosen&quot; [ label=&quot;\N |
bootargs=\&quot;root=/dev/sda2\&quot;\l&quot;]

&quot;aliases&quot; [ label=&quot;\N |
serial0=\&quot;/uart&#64;fe001000\&quot;\l&quot;]

&quot;/&quot;:e    -&gt; &quot;cpus&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;0&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;1&quot;:w
&quot;/&quot;:e    -&gt; &quot;memory&#64;0&quot;:w
&quot;/&quot;:e    -&gt; &quot;uart&#64;fe001000&quot;:w
&quot;/&quot;:e    -&gt; &quot;chosen&quot;:w
&quot;/&quot;:e    -&gt; &quot;aliases&quot;:w
}" class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Devicetree Example</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="devicetree-structure-and-conventions">
<h3><span class="section-number">2.2. </span>Devicetree Structure and Conventions<a class="headerlink" href="#devicetree-structure-and-conventions" title="Link to this heading">¶</a></h3>
<section id="node-names">
<span id="sect-node-names"></span><h4><span class="section-number">2.2.1. </span>Node Names<a class="headerlink" href="#node-names" title="Link to this heading">¶</a></h4>
<section id="node-name-requirements">
<h5><span class="section-number">2.2.1.1. </span>Node Name Requirements<a class="headerlink" href="#node-name-requirements" title="Link to this heading">¶</a></h5>
<p>Each node in the devicetree is named according to the following
convention:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">node-name&#64;unit-address</span></code></p>
</div></blockquote>
<p>The <em>node-name</em> component specifies the name of the node. It shall be 1
to 31 characters in length and consist solely of characters from the set
of characters in <a class="reference internal" href="#node-name-characters"><span class="std std-numref">Table 2.1</span></a>.</p>
<span id="node-name-characters"></span><table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">Valid characters for node names</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0-9</span></code></p></td>
<td><p>digit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a-z</span></code></p></td>
<td><p>lowercase letter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></p></td>
<td><p>uppercase letter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">,</span></code></p></td>
<td><p>comma</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
<td><p>period</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></td>
<td><p>underscore</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p>plus sign</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>dash</p></td>
</tr>
</tbody>
</table>
<p>The <em>node-name</em> shall start with a lower or uppercase character and
should describe the general class of device.</p>
<p>The <em>unit-address</em> component of the name is specific to the bus type on
which the node sits. It consists of one or more ASCII characters from
the set of characters in <a class="reference internal" href="#node-name-characters"><span class="std std-numref">Table 2.1</span></a>. The
unit-address must match the first
address specified in the <em>reg</em> property of the node. If the node has no
<em>reg</em> property, the <em>&#64;unit-address</em> must be omitted and the
<em>node-name</em> alone differentiates the node from other nodes at the same
level in the tree. The binding for a particular bus may specify
additional, more specific requirements for the format of <em>reg</em> and the
<em>unit-address</em>.</p>
<p>In the case of <em>node-name</em> without an <em>&#64;unit-address</em> the <em>node-name</em> shall
be unique from any property names at the same level in the tree.</p>
<p>The root node does not have a node-name or unit-address. It is
identified by a forward slash (/).</p>
<figure class="align-default" id="id5">
<span id="example-nodenames"></span><div class="graphviz"><img src="_images/graphviz-31f6b02fef88aa825e5018604d7d91f93338d4dc.png" alt="digraph tree {
rankdir = LR;
ranksep = equally;
size = &quot;6,8&quot;
node [ shape=&quot;Mrecord&quot;; width=&quot;2.5&quot;; fontname = Courier; ];

&quot;/&quot;:e    -&gt; &quot;cpus&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;0&quot;:w
&quot;cpus&quot;:e -&gt; &quot;cpu&#64;1&quot;:w
&quot;/&quot;:e    -&gt; &quot;memory&#64;0&quot;:w
&quot;/&quot;:e    -&gt; &quot;uart&#64;fe001000&quot;:w
&quot;/&quot;:e    -&gt; &quot;ethernet&#64;fe002000&quot;:w
&quot;/&quot;:e    -&gt; &quot;ethernet&#64;fe003000&quot;:w
}" class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Examples of Node Names</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>In <a class="reference internal" href="#example-nodenames"><span class="std std-numref">Fig. 2.2</span></a>:</p>
<ul class="simple">
<li><p>The nodes with the name <code class="docutils literal notranslate"><span class="pre">cpu</span></code> are distinguished by their unit-address
values of 0 and 1.</p></li>
<li><p>The nodes with the name <code class="docutils literal notranslate"><span class="pre">ethernet</span></code> are distinguished by their
unit-address values of <code class="docutils literal notranslate"><span class="pre">fe002000</span></code> and <code class="docutils literal notranslate"><span class="pre">fe003000</span></code>.</p></li>
</ul>
</section>
</section>
<section id="generic-names-recommendation">
<h4><span class="section-number">2.2.2. </span>Generic Names Recommendation<a class="headerlink" href="#generic-names-recommendation" title="Link to this heading">¶</a></h4>
<p>The name of a node should be somewhat generic, reflecting the function
of the device and not its precise programming model. If appropriate, the
name should be one of the following choices:</p>
<table class="hlist"><tr><td><ul class="simple">
<li><p>adc</p></li>
<li><p>accelerometer</p></li>
<li><p>air-pollution-sensor</p></li>
<li><p>atm</p></li>
<li><p>audio-codec</p></li>
<li><p>audio-controller</p></li>
<li><p>backlight</p></li>
<li><p>bluetooth</p></li>
<li><p>bus</p></li>
<li><p>cache-controller</p></li>
<li><p>camera</p></li>
<li><p>can</p></li>
<li><p>charger</p></li>
<li><p>clock</p></li>
<li><p>clock-controller</p></li>
<li><p>co2-sensor</p></li>
<li><p>compact-flash</p></li>
<li><p>cpu</p></li>
<li><p>cpus</p></li>
<li><p>crypto</p></li>
<li><p>disk</p></li>
<li><p>display</p></li>
<li><p>display-controller</p></li>
<li><p>dma-controller</p></li>
<li><p>dsi</p></li>
<li><p>dsp</p></li>
<li><p>eeprom</p></li>
<li><p>efuse</p></li>
<li><p>endpoint</p></li>
<li><p>ethernet</p></li>
<li><p>ethernet-phy</p></li>
<li><p>fdc</p></li>
<li><p>flash</p></li>
<li><p>gnss</p></li>
<li><p>gpio</p></li>
</ul>
</td><td><ul class="simple">
<li><p>gpu</p></li>
<li><p>gyrometer</p></li>
<li><p>hdmi</p></li>
<li><p>hwlock</p></li>
<li><p>i2c</p></li>
<li><p>i2c-mux</p></li>
<li><p>ide</p></li>
<li><p>interrupt-controller</p></li>
<li><p>iommu</p></li>
<li><p>isa</p></li>
<li><p>keyboard</p></li>
<li><p>key</p></li>
<li><p>keys</p></li>
<li><p>lcd-controller</p></li>
<li><p>led</p></li>
<li><p>leds</p></li>
<li><p>led-controller</p></li>
<li><p>light-sensor</p></li>
<li><p>lora</p></li>
<li><p>magnetometer</p></li>
<li><p>mailbox</p></li>
<li><p>mdio</p></li>
<li><p>memory</p></li>
<li><p>memory-controller</p></li>
<li><p>mmc</p></li>
<li><p>mmc-slot</p></li>
<li><p>mouse</p></li>
<li><p>nand-controller</p></li>
<li><p>nvram</p></li>
<li><p>oscillator</p></li>
<li><p>parallel</p></li>
<li><p>pc-card</p></li>
<li><p>pci</p></li>
<li><p>pcie</p></li>
</ul>
</td><td><ul class="simple">
<li><p>phy</p></li>
<li><p>pinctrl</p></li>
<li><p>pmic</p></li>
<li><p>pmu</p></li>
<li><p>port</p></li>
<li><p>ports</p></li>
<li><p>power-monitor</p></li>
<li><p>pwm</p></li>
<li><p>regulator</p></li>
<li><p>reset-controller</p></li>
<li><p>rng</p></li>
<li><p>rtc</p></li>
<li><p>sata</p></li>
<li><p>scsi</p></li>
<li><p>serial</p></li>
<li><p>sound</p></li>
<li><p>spi</p></li>
<li><p>spmi</p></li>
<li><p>sram-controller</p></li>
<li><p>ssi-controller</p></li>
<li><p>syscon</p></li>
<li><p>temperature-sensor</p></li>
<li><p>timer</p></li>
<li><p>touchscreen</p></li>
<li><p>tpm</p></li>
<li><p>ufshc</p></li>
<li><p>usb</p></li>
<li><p>usb-hub</p></li>
<li><p>usb-phy</p></li>
<li><p>vibrator</p></li>
<li><p>video-codec</p></li>
<li><p>vme</p></li>
<li><p>watchdog</p></li>
<li><p>wifi</p></li>
</ul>
</td></tr></table>
</section>
<section id="path-names">
<h4><span class="section-number">2.2.3. </span>Path Names<a class="headerlink" href="#path-names" title="Link to this heading">¶</a></h4>
<p>A node in the devicetree can be uniquely identified by specifying the
full path from the root node, through all descendant nodes, to the
desired node.</p>
<p>The convention for specifying a device path is:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/node-name-1/node-name-2/node-name-N</span></code></p>
</div></blockquote>
<p>For example, in <a class="reference internal" href="#example-nodenames"><span class="std std-numref">Fig. 2.2</span></a>, the device path to cpu #1 would be:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/cpus/cpu&#64;1</span></code></p>
</div></blockquote>
<p>The path to the root node is /.</p>
<p>A unit address may be omitted if the full path to the node is
unambiguous.</p>
<p>If a client program encounters an ambiguous path, its behavior is
undefined.</p>
</section>
<section id="properties">
<h4><span class="section-number">2.2.4. </span>Properties<a class="headerlink" href="#properties" title="Link to this heading">¶</a></h4>
<p>Each node in the devicetree has properties that describe the
characteristics of the node. Properties consist of a name and a value.</p>
<section id="property-names">
<h5><span class="section-number">2.2.4.1. </span>Property Names<a class="headerlink" href="#property-names" title="Link to this heading">¶</a></h5>
<p>Property names are strings of 1 to 31 characters from the characters show in
<a class="reference internal" href="#property-name-characters"><span class="std std-numref">Table 2.2</span></a></p>
<span id="property-name-characters"></span><table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 2.2 </span><span class="caption-text">Valid characters for property names</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0-9</span></code></p></td>
<td><p>digit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a-z</span></code></p></td>
<td><p>lowercase letter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></p></td>
<td><p>uppercase letter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">,</span></code></p></td>
<td><p>comma</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
<td><p>period</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></td>
<td><p>underscore</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p>plus sign</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
<td><p>question mark</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#</span></code></p></td>
<td><p>hash</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>dash</p></td>
</tr>
</tbody>
</table>
<p>Nonstandard property names should specify a unique string prefix, such
as a stock ticker symbol, identifying the name of the company or
organization that defined the property. Examples:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">fsl,channel-fifo-len</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ibm,ppc-interrupt-server#s</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">linux,network-index</span></code></div>
</div>
</div></blockquote>
</section>
<section id="property-values">
<span id="sect-property-values"></span><h5><span class="section-number">2.2.4.2. </span>Property Values<a class="headerlink" href="#property-values" title="Link to this heading">¶</a></h5>
<p>A property value is an array of zero or more bytes that contain
information associated with the property.</p>
<p>Properties might have an empty value if conveying true-false
information. In this case, the presence or absence of the property is
sufficiently descriptive.</p>
<p><a class="reference internal" href="#property-values-table"><span class="std std-numref">Table 2.3</span></a> describes the set of basic value types defined by the DTSpec.</p>
<span id="property-values-table"></span><table class="longtable docutils align-default" id="id7">
<caption><span class="caption-number">Table 2.3 </span><span class="caption-text">Property values</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>Value is empty. Used for conveying true-false information, when
the presence or absence of the property itself is sufficiently
descriptive.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>A 32-bit integer in big-endian format. Example: the 32-bit value
0x11223344 would be represented in memory as:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>address    11
address+1  22
address+2  33
address+3  44
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></p></td>
<td><p>Represents a 64-bit integer in big-endian format. Consists of
two <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> values where the first value contains the most
significant bits of the integer and the second value contains
the least significant bits.</p>
<p>Example: the 64-bit value 0x1122334455667788 would be
represented as two cells as: <code class="docutils literal notranslate"><span class="pre">&lt;0x11223344</span> <span class="pre">0x55667788&gt;</span></code>.</p>
<p>The value would be represented in memory as:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  address  11
address+1  22
address+2  33
address+3  44
address+4  55
address+5  66
address+6  77
address+7  88
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Strings are printable and null-terminated. Example: the string
“hello” would be represented in memory as:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  address  68  &#39;h&#39;
address+1  65  &#39;e&#39;
address+2  6C  &#39;l&#39;
address+3  6C  &#39;l&#39;
address+4  6F  &#39;o&#39;
address+5  00  &#39;\0&#39;
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Format is specific to the property. See the property definition.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></p></td>
<td><p>A <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value. A <em>phandle</em> value is a way to reference another
node in the devicetree. Any node that can be referenced defines
a phandle property with a unique <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value. That number
is used for the value of properties with a phandle value
type.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></p></td>
<td><p>A list of <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> values concatenated together.</p>
<p>Example: The string list “hello”,”world” would be represented in
memory as:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   address  68  &#39;h&#39;
 address+1  65  &#39;e&#39;
 address+2  6C  &#39;l&#39;
 address+3  6C  &#39;l&#39;
 address+4  6F  &#39;o&#39;
 address+5  00  &#39;\0&#39;
 address+6  77  &#39;w&#39;
 address+7  6f  &#39;o&#39;
 address+8  72  &#39;r&#39;
 address+9  6C  &#39;l&#39;
address+10  64  &#39;d&#39;
address+11  00  &#39;\0&#39;
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="standard-properties">
<span id="sect-standard-properties"></span><h3><span class="section-number">2.3. </span>Standard Properties<a class="headerlink" href="#standard-properties" title="Link to this heading">¶</a></h3>
<p>DTSpec specifies a set of standard properties for device nodes. These
properties are described in detail in this section.
Device nodes defined by DTSpec
(see <a class="reference internal" href="#document-chapter3-devicenodes#chapter-device-node-requirements"><span class="std std-numref">Chapter 3</span></a>) may specify
additional requirements or constraints regarding the use of the standard
properties.
<a class="reference internal" href="#document-chapter4-device-bindings#chapter-device-bindings"><span class="std std-numref">Chapter 4</span></a> describes the representation
of specific devices and may also specify additional requirements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All examples of devicetree nodes in this document use the
<abbr title="Devicetree Source">DTS</abbr> format for specifying nodes and properties.</p>
</div>
<section id="compatible">
<span id="sect-standard-properties-compatible"></span><h4><span class="section-number">2.3.1. </span>compatible<a class="headerlink" href="#compatible" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">compatible</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>compatible</em> property value consists of one or more strings that
define the specific programming model for the device. This list of
strings should be used by a client program for device driver selection.
The property value consists of a concatenated list of null-terminated
strings, from most specific to most general. They allow a device to
express its compatibility with a family of similar devices, potentially
allowing a single device driver to match against several devices.</p>
<p>The recommended format is <code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> is a string describing the name of the manufacturer
(such as a stock ticker symbol), and <code class="docutils literal notranslate"><span class="pre">model</span></code> specifies the model
number.</p>
<p>The compatible string should consist only of lowercase letters, digits, and
dashes, and should start with a letter. A single comma is typically only
used following a vendor prefix. Underscores should not be used.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">compatible</span> <span class="pre">=</span> <span class="pre">&quot;fsl,mpc8641&quot;,</span> <span class="pre">&quot;ns16550&quot;;</span></code></p>
<p>In this example, an operating system would first try to locate a device
driver that supported fsl,mpc8641. If a driver was not found, it
would then try to locate a driver that supported the more general
ns16550 device type.</p>
</div></blockquote>
</section>
<section id="model">
<h4><span class="section-number">2.3.2. </span>model<a class="headerlink" href="#model" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">model</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The model property value is a <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> that specifies the manufacturer’s
model number of the device.</p>
<p>The recommended format is: <code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> is a string describing the name of the manufacturer
(such as a stock ticker symbol), and model specifies the model number.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">model</span> <span class="pre">=</span> <span class="pre">&quot;fsl,MPC8349EMITX&quot;;</span></code></p>
</div></blockquote>
</section>
<section id="phandle">
<span id="sect-standard-properties-phandle"></span><h4><span class="section-number">2.3.3. </span>phandle<a class="headerlink" href="#phandle" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">phandle</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>phandle</em> property specifies a numerical identifier for a node that
is unique within the devicetree. The <em>phandle</em> property value is used
by other nodes that need to refer to the node associated with the
property.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>See the following devicetree excerpt:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">pic</span><span class="nf">@10000000</span> <span class="p">{</span>
   <span class="nf">phandle</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">interrupt-controller</span><span class="p">;</span>
   <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x10000000</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>A <em>phandle</em> value of 1 is defined. Another device node could reference
the pic node with a phandle value of 1:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">another-device-node</span> <span class="p">{</span>
  <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Older versions of devicetrees may be encountered that contain a
deprecated form of this property called <code class="docutils literal notranslate"><span class="pre">linux,phandle</span></code>. For
compatibility, a client program might want to support <code class="docutils literal notranslate"><span class="pre">linux,phandle</span></code>
if a <code class="docutils literal notranslate"><span class="pre">phandle</span></code> property is not present. The meaning and use of the two
properties is identical.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most devicetrees in <abbr title="Device Tree Syntax">DTS</abbr> (see
<a class="reference internal" href="#document-chapter6-source-language#chapter-devicetree-source-format"><span class="std std-numref">Chapter 6</span></a>) will not contain
explicit phandle properties. The DTC tool automatically inserts the
<code class="docutils literal notranslate"><span class="pre">phandle</span></code> properties when the DTS is compiled into the binary DTB format.</p>
</div>
</section>
<section id="status">
<h4><span class="section-number">2.3.4. </span>status<a class="headerlink" href="#status" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">status</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">status</span></code> property indicates the operational status of a device.  The
lack of a <code class="docutils literal notranslate"><span class="pre">status</span></code> property should be treated as if the property existed
with the value of <code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code>.
Valid values are listed and defined in <a class="reference internal" href="#table-prop-status-values"><span class="std std-numref">Table 2.4</span></a>.</p>
</div></blockquote>
<span id="table-prop-status-values"></span><table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 2.4 </span><span class="caption-text">Values for status property</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code></p></td>
<td><p>Indicates the device is operational.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code></p></td>
<td><p>Indicates that the device is not presently operational, but it
might become operational in the future (for example, something
is not plugged in, or switched off).</p>
<p>Refer to the device binding for details on what disabled means
for a given device.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;reserved&quot;</span></code></p></td>
<td><p>Indicates that the device is operational, but should not be
used. Typically this is used for devices that are controlled
by another software component, such as platform firmware.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;fail&quot;</span></code></p></td>
<td><p>Indicates that the device is not operational. A serious error
was detected in the device, and it is unlikely to become
operational without repair.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;fail-sss&quot;</span></code></p></td>
<td><p>Indicates that the device is not operational. A serious error
was detected in the device and it is unlikely to become
operational without repair. The <em>sss</em> portion of the value is
specific to the device and indicates the error condition
detected.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="address-cells-and-size-cells">
<h4><span class="section-number">2.3.5. </span>#address-cells and #size-cells<a class="headerlink" href="#address-cells-and-size-cells" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">#address-cells</span></code>, <code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>#address-cells</em> and <em>#size-cells</em> properties may be used in any
device node that has children in the devicetree hierarchy and describes
how child device nodes should be addressed. The <em>#address-cells</em>
property defines the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells used to encode the address
field in a child node’s <em>reg</em> property. The <em>#size-cells</em> property
defines the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells used to encode the size field in a
child node’s <em>reg</em> property.</p>
<p>The <em>#address-cells</em> and <em>#size-cells</em> properties are not inherited from
ancestors in the devicetree. They shall be explicitly defined.</p>
<p>A DTSpec-compliant boot program shall supply <em>#address-cells</em> and
<em>#size-cells</em> on all nodes that have children.</p>
<p>If missing, a client program should assume a default value of 2 for
<em>#address-cells</em>, and a value of 1 for <em>#size-cells</em>.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>See the following devicetree excerpt:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>

   <span class="nc">serial</span><span class="nf">@4600</span> <span class="p">{</span>
      <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;ns16550&quot;</span><span class="p">;</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4600</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupts</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xA</span> <span class="mh">0x8</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>ipic<span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In this example, the <em>#address-cells</em> and <em>#size-cells</em> properties of the <code class="docutils literal notranslate"><span class="pre">soc</span></code> node
are both set to 1. This setting specifies that one cell is required to
represent an address and one cell is required to represent the size of
nodes that are children of this node.</p>
<p>The serial device <em>reg</em> property necessarily follows this specification
set in the parent (<code class="docutils literal notranslate"><span class="pre">soc</span></code>) node—the address is represented by a single cell
(0x4600), and the size is represented by a single cell (0x100).</p>
</div></blockquote>
</section>
<section id="reg">
<h4><span class="section-number">2.3.6. </span>reg<a class="headerlink" href="#reg" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">reg</span></code></p>
<p>Property value: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of (<em>address</em>, <em>length</em>) pairs.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>reg</em> property describes the address of the device’s resources
within the address space defined by its parent bus. Most commonly this
means the offsets and lengths of memory-mapped IO register blocks, but
may have a different meaning on some bus types. Addresses in the address
space defined by the root node are CPU real addresses.</p>
<p>The value is a <em>&lt;prop-encoded-array&gt;</em>, composed of an arbitrary number
of pairs of address and length, <em>&lt;address length&gt;</em>. The number of
<em>&lt;u32&gt;</em> cells required to specify the address and length are
bus-specific and are specified by the <em>#address-cells</em> and <em>#size-cells</em>
properties in the parent of the device node. If the parent node
specifies a value of 0 for <em>#size-cells</em>, the length field in the value
of <em>reg</em> shall be omitted.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>Suppose a device within a system-on-a-chip had two blocks of registers, a
32-byte block at offset 0x3000 in the SOC and a 256-byte block at offset
0xFE00. The <em>reg</em> property would be encoded as follows (assuming
<em>#address-cells</em> and <em>#size-cells</em> values of 1):</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">reg</span> <span class="pre">=</span> <span class="pre">&lt;0x3000</span> <span class="pre">0x20</span> <span class="pre">0xFE00</span> <span class="pre">0x100&gt;;</span></code></p>
</div></blockquote>
</div></blockquote>
</section>
<section id="virtual-reg">
<span id="sect-standard-properties-virtual-reg"></span><h4><span class="section-number">2.3.7. </span>virtual-reg<a class="headerlink" href="#virtual-reg" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">virtual-reg</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>virtual-reg</em> property specifies an effective address that maps to
the first physical address specified in the <em>reg</em> property of the device
node. This property enables boot programs to provide client programs
with virtual-to-physical mappings that have been set up.</p>
</div></blockquote>
</section>
<section id="ranges">
<span id="sect-standard-properties-ranges"></span><h4><span class="section-number">2.3.8. </span>ranges<a class="headerlink" href="#ranges" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">ranges</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
(<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>) triplets.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>ranges</em> property provides a means of defining a mapping or
translation between the address space of the bus (the child address
space) and the address space of the bus node’s parent (the parent
address space).</p>
<p>The format of the value of the <em>ranges</em> property is an arbitrary number
of triplets of (<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>)</p>
<ul class="simple">
<li><p>The <em>child-bus-address</em> is a physical address within the child bus’
address space. The number of cells to represent the address is bus
dependent and can be determined from the <em>#address-cells</em> of this node
(the node in which the <em>ranges</em> property appears).</p></li>
<li><p>The <em>parent-bus-address</em> is a physical address within the parent bus’
address space. The number of cells to represent the parent address is
bus dependent and can be determined from the <em>#address-cells</em> property
of the node that defines the parent’s address space.</p></li>
<li><p>The <em>length</em> specifies the size of the range in the child’s address space. The number
of cells to represent the size can be determined from the <em>#size-cells</em>
of this node (the node in which the <em>ranges</em> property appears).</p></li>
</ul>
<p>If the property is defined with an <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> value, it specifies that the
parent and child address space is identical, and no address translation
is required.</p>
<p>If the property is not present in a bus node, it is assumed that no
mapping exists between children of the node and the parent address
space.</p>
</div></blockquote>
<p>Address Translation Example:</p>
<blockquote>
<div><div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;simple-bus&quot;</span><span class="p">;</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">ranges</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0xe0000000</span> <span class="mh">0x00100000</span><span class="p">&gt;;</span>

   <span class="nc">serial</span><span class="nf">@4600</span> <span class="p">{</span>
      <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;serial&quot;</span><span class="p">;</span>
      <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;ns16550&quot;</span><span class="p">;</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4600</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupts</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xA</span> <span class="mh">0x8</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-parent</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>ipic<span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">soc</span></code> node specifies a <em>ranges</em> property of</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0xe0000000</span> <span class="pre">0x00100000&gt;;</span></code></p>
</div></blockquote>
<p>This property value specifies that for a 1024 KB range of address space,
a child node addressed at physical 0x0 maps to a parent address of
physical 0xe0000000. With this mapping, the <code class="docutils literal notranslate"><span class="pre">serial</span></code> device node can
be addressed by a load or store at address 0xe0004600, an offset of
0x4600 (specified in <em>reg</em>) plus the 0xe0000000 mapping specified in
<em>ranges</em>.</p>
</div></blockquote>
</section>
<section id="dma-ranges">
<h4><span class="section-number">2.3.9. </span>dma-ranges<a class="headerlink" href="#dma-ranges" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">dma-ranges</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
(<em>child-bus-address</em>, <em>parent-bus-address</em>, <em>length</em>) triplets.</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>dma-ranges</em> property is used to describe the direct memory access
(DMA) structure of a memory-mapped bus whose devicetree parent can be
accessed from DMA operations originating from the bus. It provides a
means of defining a mapping or translation between the physical address
space of the bus and the physical address space of the parent of the
bus.</p>
<p>The format of the value of the <em>dma-ranges</em> property is an arbitrary
number of triplets of (<em>child-bus-address</em>, <em>parent-bus-address</em>,
<em>length</em>). Each triplet specified describes a contiguous DMA address
range.</p>
<ul class="simple">
<li><p>The <em>child-bus-address</em> is a physical address within the child bus’
address space. The number of cells to represent the address depends
on the bus and can be determined from the <em>#address-cells</em> of this
node (the node in which the <em>dma-ranges</em> property appears).</p></li>
<li><p>The <em>parent-bus-address</em> is a physical address within the parent bus’
address space. The number of cells to represent the parent address is
bus dependent and can be determined from the <em>#address-cells</em>
property of the node that defines the parent’s address space.</p></li>
<li><p>The <em>length</em> specifies the size of the range in the child’s address
space. The number of cells to represent the size can be determined
from the <em>#size-cells</em> of this node (the node in which the dma-ranges
property appears).</p></li>
</ul>
</div></blockquote>
</section>
<section id="dma-coherent">
<h4><span class="section-number">2.3.10. </span>dma-coherent<a class="headerlink" href="#dma-coherent" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">dma-coherent</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p>
<dl class="simple">
<dt>Description:</dt><dd><p>For architectures which are by default non-coherent for I/O, the
<em>dma-coherent</em> property is used to indicate a device is capable of
coherent DMA operations. Some architectures have coherent DMA by default
and this property is not applicable.</p>
</dd>
</dl>
</section>
<section id="dma-noncoherent">
<h4><span class="section-number">2.3.11. </span>dma-noncoherent<a class="headerlink" href="#dma-noncoherent" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">dma-noncoherent</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p>
<dl class="simple">
<dt>Description:</dt><dd><p>For architectures which are by default coherent for I/O, the
<em>dma-noncoherent</em> property is used to indicate a device is not capable of
coherent DMA operations. Some architectures have non-coherent DMA by
default and this property is not applicable.</p>
</dd>
</dl>
</section>
<section id="name-deprecated">
<h4><span class="section-number">2.3.12. </span>name (deprecated)<a class="headerlink" href="#name-deprecated" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">name</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>name</em> property is a string specifying the name of the node. This
property is deprecated, and its use is not recommended. However, it
might be used in older non-DTSpec-compliant devicetrees. Operating
system should determine a node’s name based on the <em>node-name</em> component of
the node name (see <a class="reference internal" href="#sect-node-names"><span class="std std-numref">Section 2.2.1</span></a>).</p>
</div></blockquote>
</section>
<section id="device-type-deprecated">
<h4><span class="section-number">2.3.13. </span>device_type (deprecated)<a class="headerlink" href="#device-type-deprecated" title="Link to this heading">¶</a></h4>
<p>Property name: <code class="docutils literal notranslate"><span class="pre">device_type</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>device_type</em> property was used in IEEE 1275 to describe the
device’s FCode programming model. Because DTSpec does not have FCode, new
use of the property is deprecated, and it should be included only on <code class="docutils literal notranslate"><span class="pre">cpu</span></code>
and <code class="docutils literal notranslate"><span class="pre">memory</span></code> nodes for compatibility with IEEE 1275–derived devicetrees.</p>
</div></blockquote>
</section>
</section>
<section id="interrupts-and-interrupt-mapping">
<span id="sect-interrupts"></span><h3><span class="section-number">2.4. </span>Interrupts and Interrupt Mapping<a class="headerlink" href="#interrupts-and-interrupt-mapping" title="Link to this heading">¶</a></h3>
<p>DTSpec adopts the interrupt tree model of representing interrupts
specified in <em>Open Firmware Recommended Practice: Interrupt Mapping,
Version 0.9</em> <a class="reference internal" href="#document-references#b7" id="id1"><span>[b7]</span></a>. Within the devicetree a logical interrupt tree exists
that represents the hierarchy and routing of interrupts in the platform
hardware. While generically referred to as an interrupt tree it is more
technically a directed acyclic graph.</p>
<p>The physical wiring of an interrupt source to an interrupt controller is
represented in the devicetree with the <em>interrupt-parent</em> property.
Nodes that represent interrupt-generating devices contain an
<em>interrupt-parent</em> property which has a <em>phandle</em> value that points to
the device to which the device’s interrupts are routed, typically an
interrupt controller. If an interrupt-generating device does not have an
<em>interrupt-parent</em> property, its interrupt parent is assumed to be its
devicetree parent.</p>
<p>Each interrupt generating device contains an <em>interrupts</em> property with
a value describing one or more interrupt sources for that device. Each
source is represented with information called an <em>interrupt specifier</em>.
The format and meaning of an <em>interrupt specifier</em> is interrupt domain
specific, i.e., it is dependent on properties on the node at the root of
its interrupt domain. The <em>#interrupt-cells</em> property is used by the
root of an interrupt domain to define the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> values
needed to encode an interrupt specifier. For example, for an Open PIC
interrupt controller, an interrupt-specifer takes two 32-bit values and
consists of an interrupt number and level/sense information for the
interrupt.</p>
<p>An interrupt domain is the context in which an interrupt specifier is
interpreted. The root of the domain is either (1) an interrupt
controller or (2) an interrupt nexus.</p>
<ol class="arabic simple">
<li><p>An <em>interrupt controller</em> is a physical device and will need a driver
to handle interrupts routed through it. It may also cascade into
another interrupt domain. An interrupt controller is specified by the
presence of an <em>interrupt-controller</em> property on that node in the
devicetree.</p></li>
<li><p>An <em>interrupt nexus</em> defines a translation between one interrupt
domain and another. The translation is based on both domain-specific
and bus-specific information. This translation between domains is
performed with the <em>interrupt-map</em> property. For example, a PCI
controller device node could be an interrupt nexus that defines a
translation from the PCI interrupt namespace (INTA, INTB, etc.) to an
interrupt controller with Interrupt Request (IRQ) numbers.</p></li>
</ol>
<p>The root of the interrupt tree is determined when traversal of the
interrupt tree reaches an interrupt controller node without an
<em>interrupts</em> property and thus no explicit interrupt parent.</p>
<p>See <a class="reference internal" href="#example-interrupt-tree"><span class="std std-numref">Fig. 2.3</span></a> for an example of a graphical
representation of a devicetree with interrupt parent relationships shown. It
shows both the natural structure of the devicetree as well as where each node
sits in the logical interrupt tree.</p>
<figure class="align-default" id="id9">
<span id="example-interrupt-tree"></span><div class="graphviz"><img src="_images/graphviz-068ddbb1577ea3fe2936a53bf9e1001baa35cc44.png" alt="digraph tree {
rankdir = LR
ranksep = &quot;1.5&quot;
size = &quot;6,8&quot;
edge [ dir=&quot;none&quot; ]
node [ shape=&quot;Mrecord&quot; width=&quot;2.5&quot; ]

subgraph cluster_devices {
   label = &quot;Devicetree&quot;
   graph [ style = dotted ]
   &quot;soc&quot; [ ]
   &quot;device1&quot; [ label = &quot;device1 | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;device2&quot; [ label = &quot;device2 | interrupt-parent=\&lt;&amp;gpioctrl\&gt;&quot; ]
   &quot;pci-host&quot; [ label = &quot;pci-host | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;slot0&quot; [ label = &quot;slot0 | interrupt-parent=\&lt;&amp;pci-host\&gt;&quot; ]
   &quot;slot1&quot; [ label = &quot;slot1 | interrupt-parent=\&lt;&amp;pci-host\&gt;&quot; ]
   &quot;simple-bus&quot; [ label = &quot;simple-bus&quot; ]
   &quot;gpioctrl&quot; [ label = &quot;gpioctrl | interrupt-parent=\&lt;&amp;open-pic\&gt;&quot; ]
   &quot;device3&quot; [ label = &quot;device3 | interrupt-parent=\&lt;&amp;gpioctrl\&gt;&quot; ]

   edge [dir=back color=blue]
   &quot;soc&quot;:e -&gt; &quot;device1&quot;:w
   &quot;soc&quot;:e -&gt; &quot;device2&quot;:w
   &quot;soc&quot;:e -&gt; &quot;open-pic&quot;:w
   &quot;soc&quot;:e -&gt; &quot;pci-host&quot;:w
   &quot;soc&quot;:e -&gt; &quot;simple-bus&quot;:w
   &quot;pci-host&quot;:e -&gt; &quot;slot0&quot;:w
   &quot;pci-host&quot;:e -&gt; &quot;slot1&quot;:w
   &quot;simple-bus&quot;:e -&gt; &quot;gpioctrl&quot;:w
   &quot;simple-bus&quot;:e -&gt; &quot;device3&quot;:w
}

subgraph cluster_interrupts {
   label = &quot;Interrupt tree&quot;
   graph [ style = dotted ]

   &quot;i-open-pic&quot; [ label = &quot;open-pic | Root of Interrupt tree&quot; ]
   &quot;i-pci-host&quot; [ label = &quot;pci-host | Nexus Node&quot; ]
   &quot;i-gpioctrl&quot; [ label = &quot;gpioctrl | Nexus Node&quot; ]
   &quot;i-device1&quot; [ label = &quot;device1&quot; ]
   &quot;i-device2&quot; [ label = &quot;device2&quot; ]
   &quot;i-device3&quot; [ label = &quot;device3&quot; ]
   &quot;i-slot0&quot; [ label = &quot;slot0&quot; ]
   &quot;i-slot1&quot; [ label = &quot;slot1&quot; ]

   edge [dir=back color=green]
   &quot;i-open-pic&quot;:e -&gt; &quot;i-device1&quot;:w
   &quot;i-open-pic&quot;:e -&gt; &quot;i-pci-host&quot;:w
   &quot;i-open-pic&quot;:e -&gt; &quot;i-gpioctrl&quot;:w
   &quot;i-pci-host&quot;:e -&gt; &quot;i-slot0&quot;:w
   &quot;i-pci-host&quot;:e -&gt; &quot;i-slot1&quot;:w
   &quot;i-gpioctrl&quot;:e -&gt; &quot;i-device2&quot;:w
   &quot;i-gpioctrl&quot;:e -&gt; &quot;i-device3&quot;:w
}

subgraph {
   edge [color=red, style=dotted, constraint=false]
   &quot;open-pic&quot; -&gt; &quot;i-open-pic&quot;
   &quot;gpioctrl&quot;:w -&gt; &quot;i-gpioctrl&quot;
   &quot;pci-host&quot; -&gt; &quot;i-pci-host&quot;
   &quot;slot0&quot;:e -&gt; &quot;i-slot0&quot;:e
   &quot;slot1&quot;:e -&gt; &quot;i-slot1&quot;:e
   &quot;device2&quot;:e -&gt; &quot;i-device2&quot;:w
   &quot;device3&quot;:e -&gt; &quot;i-device3&quot;:e
}
}" class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">Example of the interrupt tree</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>In the example shown in <a class="reference internal" href="#example-interrupt-tree"><span class="std std-numref">Fig. 2.3</span></a>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">open-pic</span></code> interrupt controller is the root of the interrupt tree.</p></li>
<li><p>The interrupt tree root has three children—devices that route their
interrupts directly to the <code class="docutils literal notranslate"><span class="pre">open-pic</span></code></p>
<ul>
<li><p>device1</p></li>
<li><p>PCI host controller</p></li>
<li><p>GPIO Controller</p></li>
</ul>
</li>
<li><p>Three interrupt domains exist; one rooted at the <code class="docutils literal notranslate"><span class="pre">open-pic</span></code> node,
one at the <code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">host</span> <span class="pre">bridge</span></code> node, and one at the
<code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">Controller</span></code> node.</p></li>
<li><p>There are two nexus nodes; one at the <code class="docutils literal notranslate"><span class="pre">PCI</span> <span class="pre">host</span> <span class="pre">bridge</span></code> and one at
the <code class="docutils literal notranslate"><span class="pre">GPIO</span> <span class="pre">controller</span></code>.</p></li>
</ul>
<section id="properties-for-interrupt-generating-devices">
<h4><span class="section-number">2.4.1. </span>Properties for Interrupt Generating Devices<a class="headerlink" href="#properties-for-interrupt-generating-devices" title="Link to this heading">¶</a></h4>
<section id="interrupts">
<h5><span class="section-number">2.4.1.1. </span>interrupts<a class="headerlink" href="#interrupts" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupts</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as arbitrary number of
interrupt specifiers</p>
<p>Description:</p>
<blockquote>
<div><p>The <em>interrupts</em> property of a device node defines the interrupt or
interrupts that are generated by the device. The value of the
<em>interrupts</em> property consists of an arbitrary number of interrupt
specifiers. The format of an interrupt specifier is defined by the
binding of the interrupt domain root.</p>
<p><em>interrupts</em> is overridden by the <em>interrupts-extended</em>
property and normally only one or the other should be used.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>A common definition of an interrupt specifier in an open PIC–compatible
interrupt domain consists of two cells; an interrupt number and
level/sense information. See the following example, which defines a
single interrupt specifier, with an interrupt number of 0xA and
level/sense encoding of 8.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">interrupts</span> <span class="pre">=</span> <span class="pre">&lt;0xA</span> <span class="pre">8&gt;;</span></code></p>
</div></blockquote>
</div></blockquote>
</section>
<section id="interrupt-parent">
<h5><span class="section-number">2.4.1.2. </span>interrupt-parent<a class="headerlink" href="#interrupt-parent" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-parent</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>Because the hierarchy of the nodes in the interrupt tree might not match
the devicetree, the <em>interrupt-parent</em> property is available to make
the definition of an interrupt parent explicit. The value is the phandle
to the interrupt parent. If this property is missing from a device, its
interrupt parent is assumed to be its devicetree parent.</p>
</div></blockquote>
</section>
<section id="interrupts-extended">
<h5><span class="section-number">2.4.1.3. </span>interrupts-extended<a class="headerlink" href="#interrupts-extended" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupts-extended</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span> <span class="pre">&lt;prop-encoded-array&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>interrupts-extended</em> property lists the interrupt(s) generated by a
device.
<em>interrupts-extended</em> should be used instead of <em>interrupts</em> when a device
is connected to multiple interrupt controllers as it encodes a parent phandle
with each interrupt specifier.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>This example shows how a device with two interrupt outputs connected to two
separate interrupt controllers would describe the connection using an
<em>interrupts-extended</em> property.
<code class="docutils literal notranslate"><span class="pre">pic</span></code> is an interrupt controller with an <em>#interrupt-cells</em> specifier
of 2, while <code class="docutils literal notranslate"><span class="pre">gic</span></code> is an interrupt controller with an <em>#interrupts-cells</em>
specifier of 1.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">interrupts-extended</span> <span class="pre">=</span> <span class="pre">&lt;&amp;pic</span> <span class="pre">0xA</span> <span class="pre">8&gt;,</span> <span class="pre">&lt;&amp;gic</span> <span class="pre">0xda&gt;;</span></code></p>
</div></blockquote>
</div></blockquote>
<p>The <em>interrupts</em> and <em>interrupts-extended</em> properties are mutually exclusive.
A device node should use one or the other, but not both.
Using both is only permissible when required for compatibility with software
that does not understand <em>interrupts-extended</em>.
If both <em>interrupts-extended</em> and <em>interrupts</em> are present then
<em>interrupts-extended</em> takes precedence.</p>
</section>
</section>
<section id="properties-for-interrupt-controllers">
<h4><span class="section-number">2.4.2. </span>Properties for Interrupt Controllers<a class="headerlink" href="#properties-for-interrupt-controllers" title="Link to this heading">¶</a></h4>
<section id="interrupt-cells">
<h5><span class="section-number">2.4.2.1. </span>#interrupt-cells<a class="headerlink" href="#interrupt-cells" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>#interrupt-cells</em> property defines the number of cells required to
encode an interrupt specifier for an interrupt domain.</p>
</div></blockquote>
</section>
<section id="interrupt-controller">
<h5><span class="section-number">2.4.2.2. </span>interrupt-controller<a class="headerlink" href="#interrupt-controller" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-controller</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The presence of an <em>interrupt-controller</em> property defines a node as an
interrupt controller node.</p>
</div></blockquote>
</section>
</section>
<section id="interrupt-nexus-properties">
<h4><span class="section-number">2.4.3. </span>Interrupt Nexus Properties<a class="headerlink" href="#interrupt-nexus-properties" title="Link to this heading">¶</a></h4>
<p>An interrupt nexus node shall have an <em>#interrupt-cells</em> property.</p>
<section id="interrupt-map">
<h5><span class="section-number">2.4.3.1. </span>interrupt-map<a class="headerlink" href="#interrupt-map" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-map</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
interrupt mapping entries.</p>
<p>Description:</p>
<blockquote>
<div><p>An <em>interrupt-map</em> is a property on a nexus node that bridges one
interrupt domain with a set of parent interrupt domains and specifies
how interrupt specifiers in the child domain are mapped to their
respective parent domains.</p>
<p>The interrupt map is a table where each row is a mapping entry
consisting of five components: <em>child unit address</em>, <em>child interrupt
specifier</em>, <em>interrupt-parent</em>, <em>parent unit address</em>, <em>parent interrupt
specifier</em>.</p>
<dl class="simple">
<dt>child unit address</dt><dd><p>The unit address of the child node being mapped. The number of
32-bit cells required to specify this is described by the
<em>#address-cells</em> property of the bus node on which the child is
located.</p>
</dd>
<dt>child interrupt specifier</dt><dd><p>The interrupt specifier of the child node being mapped. The number
of 32-bit cells required to specify this component is described by
the <em>#interrupt-cells</em> property of this node—the nexus node
containing the <em>interrupt-map</em> property.</p>
</dd>
<dt>interrupt-parent</dt><dd><p>A single <em>&lt;phandle&gt;</em> value that points to the interrupt parent to
which the child domain is being mapped.</p>
</dd>
<dt>parent unit address</dt><dd><p>The unit address in the domain of the interrupt parent. The number
of 32-bit cells required to specify this address is described by the
<em>#address-cells</em> property of the node pointed to by the
interrupt-parent field.</p>
</dd>
<dt>parent interrupt specifier</dt><dd><p>The interrupt specifier in the parent domain. The number of 32-bit
cells required to specify this component is described by the
<em>#interrupt-cells</em> property of the node pointed to by the
interrupt-parent field.</p>
</dd>
</dl>
<p>Lookups are performed on the interrupt mapping table by matching a
unit-address/interrupt specifier pair against the child components in
the interrupt-map. Because some fields in the unit interrupt specifier
may not be relevant, a mask is applied before the lookup is done. This
mask is defined in the <em>interrupt-map-mask</em> property
(see <a class="reference internal" href="#sect-interrupt-map-mask"><span class="std std-numref">Section 2.4.3.2</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both the child node and the interrupt parent node are required to
have <em>#address-cells</em> and <em>#interrupt-cells</em> properties defined. If a
unit address component is not required, <em>#address-cells</em> shall be
explicitly defined to be zero.</p>
</div>
</div></blockquote>
</section>
<section id="interrupt-map-mask">
<span id="sect-interrupt-map-mask"></span><h5><span class="section-number">2.4.3.2. </span>interrupt-map-mask<a class="headerlink" href="#interrupt-map-mask" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">interrupt-map-mask</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div><p>An <em>interrupt-map-mask</em> property is specified for a nexus node in the
interrupt tree. This property specifies a mask that is ANDed with the
incoming unit interrupt specifier being looked up in the table specified
in the <em>interrupt-map</em> property.</p>
</div></blockquote>
</section>
<section id="id2">
<h5><span class="section-number">2.4.3.3. </span>#interrupt-cells<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>#interrupt-cells</em> property defines the number of cells required to
encode an interrupt specifier for an interrupt domain.</p>
</div></blockquote>
</section>
</section>
<section id="interrupt-mapping-example">
<h4><span class="section-number">2.4.4. </span>Interrupt Mapping Example<a class="headerlink" href="#interrupt-mapping-example" title="Link to this heading">¶</a></h4>
<p>The following shows the representation of a fragment of a devicetree with
a PCI bus controller and a sample interrupt map for describing the
interrupt routing for two PCI slots (IDSEL 0x11,0x12). The INTA, INTB,
INTC, and INTD pins for slots 1 and 2 are wired to the Open PIC
interrupt controller.</p>
<div class="highlight-dts notranslate" id="example-interrupt-mapping"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
   <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;simple-bus&quot;</span><span class="p">;</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>

   <span class="nl">open_pic:</span> <span class="nc">interrupt-controller</span><span class="nf">@13370000</span> <span class="p">{</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x13370000</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-controller</span><span class="p">;</span>
      <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
      <span class="nf">#interrupt-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
   <span class="p">};</span>

   <span class="nl">pci:</span> <span class="nc">pci</span><span class="nf">@47110000</span> <span class="p">{</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x47110000</span> <span class="mh">0x100</span><span class="p">&gt;;</span>
      <span class="nf">#interrupt-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
      <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
      <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">3</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-map-mask</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xf800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">7</span><span class="p">&gt;;</span>
      <span class="nf">interrupt-map</span> <span class="o">=</span> <span class="p">&lt;</span>
         <span class="cm">/* IDSEL 0x11 - PCI slot 1 */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">&amp;</span>open_pic <span class="mi">2</span> <span class="mi">1</span> <span class="cm">/* INTA */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">2</span> <span class="o">&amp;</span>open_pic <span class="mi">3</span> <span class="mi">1</span> <span class="cm">/* INTB */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">3</span> <span class="o">&amp;</span>open_pic <span class="mi">4</span> <span class="mi">1</span> <span class="cm">/* INTC */</span>
         <span class="mh">0x8800</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span> <span class="o">&amp;</span>open_pic <span class="mi">1</span> <span class="mi">1</span> <span class="cm">/* INTD */</span>
         <span class="cm">/* IDSEL 0x12 - PCI slot 2 */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">&amp;</span>open_pic <span class="mi">3</span> <span class="mi">1</span> <span class="cm">/* INTA */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">2</span> <span class="o">&amp;</span>open_pic <span class="mi">4</span> <span class="mi">1</span> <span class="cm">/* INTB */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">3</span> <span class="o">&amp;</span>open_pic <span class="mi">1</span> <span class="mi">1</span> <span class="cm">/* INTC */</span>
         <span class="mh">0x9000</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span> <span class="o">&amp;</span>open_pic <span class="mi">2</span> <span class="mi">1</span> <span class="cm">/* INTD */</span>
      <span class="p">&gt;;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>One Open PIC interrupt controller is represented and is identified as an
interrupt controller with an <em>interrupt-controller</em> property.</p>
<p>Each row in the interrupt-map table consists of five parts: a child unit
address and interrupt specifier, which is mapped to an <em>interrupt-parent</em>
node with a specified parent unit address and interrupt specifier.</p>
<ul>
<li><p>For example, the first row of the interrupt-map table specifies the
mapping for INTA of slot 1. The components of that row are shown here</p>
<div class="line-block">
<div class="line">child unit address: <code class="docutils literal notranslate"><span class="pre">0x8800</span> <span class="pre">0</span> <span class="pre">0</span></code></div>
<div class="line">child interrupt specifier: <code class="docutils literal notranslate"><span class="pre">1</span></code></div>
<div class="line">interrupt parent: <code class="docutils literal notranslate"><span class="pre">&amp;open-pic</span></code></div>
<div class="line">parent unit address: (empty because <code class="docutils literal notranslate"><span class="pre">#address-cells</span> <span class="pre">=</span> <span class="pre">&lt;0&gt;</span></code> in the
open-pic node)</div>
<div class="line">parent interrupt specifier: <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">1</span></code></div>
</div>
<ul class="simple">
<li><p>The child unit address is <code class="docutils literal notranslate"><span class="pre">&lt;0x8800</span> <span class="pre">0</span> <span class="pre">0&gt;</span></code>. This value is encoded
with three 32-bit cells, which is determined by the value of the
<em>#address-cells</em> property (value of 3) of the PCI controller. The
three cells represent the PCI address as described by the binding for
the PCI bus.</p>
<ul>
<li><p>The encoding includes the bus number (0x0 &lt;&lt; 16), device number
(0x11 &lt;&lt; 11), and function number (0x0 &lt;&lt; 8).</p></li>
</ul>
</li>
<li><p>The child interrupt specifier is <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code>, which specifies INTA as
described by the PCI binding. This takes one 32-bit cell as specified
by the <em>#interrupt-cells</em> property (value of 1) of the PCI
controller, which is the child interrupt domain.</p></li>
<li><p>The interrupt parent is specified by a phandle which points to the
interrupt parent of the slot, the Open PIC interrupt controller.</p></li>
<li><p>The parent has no unit address because the parent interrupt domain
(the open-pic node) has an <em>#address-cells</em> value of <code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code>.</p></li>
<li><p>The parent interrupt specifier is <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">1&gt;</span></code>. The number of cells to
represent the interrupt specifier (two cells) is determined by the
<em>#interrupt-cells</em> property on the interrupt parent, the open-pic
node.</p>
<ul>
<li><p>The value <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">1&gt;</span></code> is a value specified by the device binding for
the Open PIC interrupt controller
(see <a class="reference internal" href="#document-chapter4-device-bindings#sect-bindings-simple-bus"><span class="std std-numref">Section 4.5</span></a>).
The value <code class="docutils literal notranslate"><span class="pre">&lt;2&gt;</span></code> specifies the
physical interrupt source number on the interrupt controller to
which INTA is wired. The value <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code> specifies the level/sense
encoding.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In this example, the interrupt-map-mask property has a value of <code class="docutils literal notranslate"><span class="pre">&lt;0xf800</span>
<span class="pre">0</span> <span class="pre">0</span> <span class="pre">7&gt;</span></code>. This mask is applied to a child unit interrupt specifier before
performing a lookup in the <em>interrupt-map</em> table.</p>
<p>To perform a lookup of the open-pic interrupt source number for INTB for
IDSEL 0x12 (slot 2), function 0x3, the following steps would be
performed:</p>
<ul class="simple">
<li><p>The child unit address and interrupt specifier form the value
<code class="docutils literal notranslate"><span class="pre">&lt;0x9300</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code>.</p>
<ul>
<li><p>The encoding of the address includes the bus number (0x0 &lt;&lt; 16),
device number (0x12 &lt;&lt; 11), and function number (0x3 &lt;&lt; 8).</p></li>
<li><p>The interrupt specifier is 2, which is the encoding for INTB as
per the PCI binding.</p></li>
</ul>
</li>
<li><p>The interrupt-map-mask value <code class="docutils literal notranslate"><span class="pre">&lt;0xf800</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">7&gt;</span></code> is applied, giving a
result of <code class="docutils literal notranslate"><span class="pre">&lt;0x9000</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code>.</p></li>
<li><p>That result is looked up in the <em>interrupt-map</em> table, which maps to
the parent interrupt specifier <code class="docutils literal notranslate"><span class="pre">&lt;4</span> <span class="pre">1&gt;</span></code>.</p></li>
</ul>
</section>
</section>
<section id="nexus-nodes-and-specifier-mapping">
<span id="sect-nexus"></span><h3><span class="section-number">2.5. </span>Nexus Nodes and Specifier Mapping<a class="headerlink" href="#nexus-nodes-and-specifier-mapping" title="Link to this heading">¶</a></h3>
<section id="nexus-node-properties">
<h4><span class="section-number">2.5.1. </span>Nexus Node Properties<a class="headerlink" href="#nexus-node-properties" title="Link to this heading">¶</a></h4>
<p>A nexus node shall have a <em>#&lt;specifier&gt;-cells</em> property, where &lt;specifier&gt; is
some specifier space such as ‘gpio’, ‘clock’, ‘reset’, etc.</p>
<section id="specifier-map">
<h5><span class="section-number">2.5.1.1. </span>&lt;specifier&gt;-map<a class="headerlink" href="#specifier-map" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an arbitrary number of
specifier mapping entries.</p>
<p>Description:</p>
<blockquote>
<div><p>A <em>&lt;specifier&gt;-map</em> is a property in a nexus node that bridges one
specifier domain with a set of parent specifier domains and describes
how specifiers in the child domain are mapped to their respective parent
domains.</p>
<p>The map is a table where each row is a mapping entry
consisting of three components: <em>child specifier</em>, <em>specifier parent</em>, and
<em>parent specifier</em>.</p>
<dl class="simple">
<dt>child specifier</dt><dd><p>The specifier of the child node being mapped. The number
of 32-bit cells required to specify this component is described by
the <em>#&lt;specifier&gt;-cells</em> property of this node—the nexus node
containing the <em>&lt;specifier&gt;-map</em> property.</p>
</dd>
<dt>specifier parent</dt><dd><p>A single <em>&lt;phandle&gt;</em> value that points to the specifier parent to
which the child domain is being mapped.</p>
</dd>
<dt>parent specifier</dt><dd><p>The specifier in the parent domain. The number of 32-bit
cells required to specify this component is described by the
<em>#&lt;specifier&gt;-cells</em> property of the specifier parent node.</p>
</dd>
</dl>
<p>Lookups are performed on the mapping table by matching a specifier against
the child specifier in the map. Because some fields in the specifier may
not be relevant or need to be modified, a mask is applied before the lookup
is done. This mask is defined in the <em>&lt;specifier&gt;-map-mask</em> property
(see <a class="reference internal" href="#sect-specifier-map-mask"><span class="std std-numref">Section 2.5.1.2</span></a>).</p>
<p>Similarly, when the specifier is mapped, some fields in the unit specifier
may need to be kept unmodified and passed through from the child node to the
parent node. In this case, a <em>&lt;specifier&gt;-map-pass-thru</em> property
(see <a class="reference internal" href="#sect-specifier-map-pass-thru"><span class="std std-numref">Section 2.5.1.3</span></a>) may be specified to apply
a mask to the child specifier and copy any bits that match to the parent
unit specifier.</p>
</div></blockquote>
</section>
<section id="specifier-map-mask">
<span id="sect-specifier-map-mask"></span><h5><span class="section-number">2.5.1.2. </span>&lt;specifier&gt;-map-mask<a class="headerlink" href="#specifier-map-mask" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map-mask</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div><p>A <em>&lt;specifier&gt;-map-mask</em> property may be specified for a nexus node.
This property specifies a mask that is ANDed with the child unit
specifier being looked up in the table specified in the <em>&lt;specifier&gt;-map</em>
property. If this property is not specified, the mask is assumed to be
a mask with all bits set.</p>
</div></blockquote>
</section>
<section id="specifier-map-pass-thru">
<span id="sect-specifier-map-pass-thru"></span><h5><span class="section-number">2.5.1.3. </span>&lt;specifier&gt;-map-pass-thru<a class="headerlink" href="#specifier-map-pass-thru" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">&lt;specifier&gt;-map-pass-thru</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as a bit mask</p>
<p>Description:</p>
<blockquote>
<div><p>A <em>&lt;specifier&gt;-map-pass-thru</em> property may be specified for a nexus node.
This property specifies a mask that is applied to the child unit
specifier being looked up in the table specified in the <em>&lt;specifier&gt;-map</em>
property. Any matching bits in the child unit specifier are copied over
to the parent specifier. If this property is not specified, the mask is
assumed to be a mask with no bits set.</p>
</div></blockquote>
</section>
<section id="specifier-cells">
<h5><span class="section-number">2.5.1.4. </span>#&lt;specifier&gt;-cells<a class="headerlink" href="#specifier-cells" title="Link to this heading">¶</a></h5>
<p>Property: <code class="docutils literal notranslate"><span class="pre">#&lt;specifier&gt;-cells</span></code></p>
<p>Value type: <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p>
<p>Description:</p>
<blockquote>
<div><p>The <em>#&lt;specifier&gt;-cells</em> property defines the number of cells required to
encode a specifier for a domain.</p>
</div></blockquote>
</section>
</section>
<section id="specifier-mapping-example">
<h4><span class="section-number">2.5.2. </span>Specifier Mapping Example<a class="headerlink" href="#specifier-mapping-example" title="Link to this heading">¶</a></h4>
<p>The following shows the representation of a fragment of a devicetree with
two GPIO controllers and a sample specifier map for describing the
GPIO routing of a few gpios on both of the controllers through a connector
on a board to a device. The expansion device node is on one side of the
connector node and the SoC with the two GPIO controllers is on the other
side of the connector.</p>
<div class="highlight-dts notranslate" id="example-specifier-mapping"><div class="highlight"><pre><span></span><span class="nc">soc</span> <span class="p">{</span>
        <span class="nl">soc_gpio1:</span> <span class="nc">gpio-controller1</span> <span class="p">{</span>
                <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="p">};</span>

        <span class="nl">soc_gpio2:</span> <span class="nc">gpio-controller2</span> <span class="p">{</span>
                <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="p">};</span>
<span class="p">};</span>

<span class="nl">connector:</span> <span class="nc">connector</span> <span class="p">{</span>
        <span class="nf">#gpio-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio1 <span class="mi">1</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">1</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio2 <span class="mi">4</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">2</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio1 <span class="mi">3</span> <span class="mi">0</span><span class="p">&gt;,</span>
                   <span class="p">&lt;</span><span class="mi">3</span> <span class="mi">0</span> <span class="o">&amp;</span>soc_gpio2 <span class="mi">2</span> <span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map-mask</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xf</span> <span class="mh">0x0</span><span class="p">&gt;;</span>
        <span class="nf">gpio-map-pass-thru</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0x1</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="nc">expansion_device</span> <span class="p">{</span>
        <span class="nf">reset-gpios</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>connector <span class="mi">2</span> GPIO_ACTIVE_LOW<span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Each row in the gpio-map table consists of three parts: a child unit
specifier, which is mapped to a <em>gpio-controller</em>
node with a parent specifier.</p>
<ul>
<li><p>For example, the first row of the specifier-map table specifies the
mapping for GPIO 0 of the connector. The components of that row are shown
here</p>
<div class="line-block">
<div class="line">child specifier: <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span></code></div>
<div class="line">specifier parent: <code class="docutils literal notranslate"><span class="pre">&amp;soc_gpio1</span></code></div>
<div class="line">parent specifier: <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">0</span></code></div>
</div>
<ul class="simple">
<li><p>The child specifier is <code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">0&gt;</span></code>, which specifies GPIO 0 in the connector
with a <em>flags</em> field of <code class="docutils literal notranslate"><span class="pre">0</span></code>. This takes two 32-bit cells as specified
by the <em>#gpio-cells</em> property of the connector node, which is the
child specifier domain.</p></li>
<li><p>The specifier parent is specified by a phandle which points to the
specifier parent of the connector, the first GPIO controller in the SoC.</p></li>
<li><p>The parent specifier is <code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">0&gt;</span></code>. The number of cells to
represent the gpio specifier (two cells) is determined by the
<em>#gpio-cells</em> property on the specifier parent, the soc_gpio1
node.</p>
<ul>
<li><p>The value <code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">0&gt;</span></code> is a value specified by the device binding for
the GPIO controller. The value <code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code> specifies the
GPIO pin number on the GPIO controller to which GPIO 0 on the connector
is wired. The value <code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code> specifies the flags (active low,
active high, etc.).</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>In this example, the <em>gpio-map-mask</em> property has a value of <code class="docutils literal notranslate"><span class="pre">&lt;0xf</span> <span class="pre">0&gt;</span></code>.
This mask is applied to a child unit specifier before performing a lookup in
the <em>gpio-map</em> table. Similarly, the <em>gpio-map-pass-thru</em> property has a value
of <code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0x1&gt;</span></code>. This mask is applied to a child unit specifier when mapping
it to the parent unit specifier. Any bits set in this mask are cleared out of
the parent unit specifier and copied over from the child unit specifier
to the parent unit specifier.</p>
<p>To perform a lookup of the connector’s specifier source number for GPIO 2
from the expansion device’s reset-gpios property, the following steps would be
performed:</p>
<ul class="simple">
<li><p>The child specifier forms the value <code class="docutils literal notranslate"><span class="pre">&lt;2</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.</p>
<ul>
<li><p>The specifier is encoding GPIO 2 with active low flags per the GPIO
binding.</p></li>
</ul>
</li>
<li><p>The <em>gpio-map-mask</em> value <code class="docutils literal notranslate"><span class="pre">&lt;0xf</span> <span class="pre">0x0&gt;</span></code> is ANDed with the child specifier,
giving a result of <code class="docutils literal notranslate"><span class="pre">&lt;0x2</span> <span class="pre">0&gt;</span></code>.</p></li>
<li><p>The result is looked up in the <em>gpio-map</em> table, which maps to
the parent specifier <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code> and &amp;soc_gpio1 <em>phandle</em>.</p></li>
<li><p>The <em>gpio-map-pass-thru</em> value <code class="docutils literal notranslate"><span class="pre">&lt;0x0</span> <span class="pre">0x1&gt;</span></code> is inverted and ANDed with the
parent specifier found in the <em>gpio-map</em> table, resulting in <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code>.
The child specifier is ANDed with the <em>gpio-map-pass-thru</em> mask, forming
<code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code> which is then ORed with the cleared parent specifier
<code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">0&gt;</span></code> resulting in <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.</p></li>
<li><p>The specifier <code class="docutils literal notranslate"><span class="pre">&lt;3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code> is appended to the mapped <em>phandle</em>
&amp;soc_gpio1 resulting in <code class="docutils literal notranslate"><span class="pre">&lt;&amp;soc_gpio1</span> <span class="pre">3</span> <span class="pre">GPIO_ACTIVE_LOW&gt;</span></code>.</p></li>
</ul>
</section>
</section>
</section>
<span id="document-chapter3-devicenodes"></span><section id="device-node-requirements">
<span id="chapter-device-node-requirements"></span><h2><span class="section-number">3. </span>Device Node Requirements<a class="headerlink" href="#device-node-requirements" title="Link to this heading">¶</a></h2>
<section id="base-device-node-types">
<h3><span class="section-number">3.1. </span>Base Device Node Types<a class="headerlink" href="#base-device-node-types" title="Link to this heading">¶</a></h3>
<p>The sections that follow specify the requirements for the base set of
device nodes required in a DTSpec-compliant devicetree.</p>
<p>All devicetrees shall have a root node and the following nodes shall be
present at the root of all devicetrees:</p>
<ul class="simple">
<li><p>One <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node</p></li>
<li><p>At least one <code class="docutils literal notranslate"><span class="pre">/memory</span></code> node</p></li>
</ul>
</section>
<section id="root-node">
<h3><span class="section-number">3.2. </span>Root node<a class="headerlink" href="#root-node" title="Link to this heading">¶</a></h3>
<p>The devicetree has a single root node of which all other device nodes
are descendants. The full path to the root node is <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 3.1 </span><span class="caption-text">Root Node Properties</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the address in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the size in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">model</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Specifies a string that uniquely identifies
the model of the system board. The recommended
format is “manufacturer,model-number”.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></p></td>
<td><p>Specifies a list of platform architectures
with which this platform is compatible. This
property can be used by operating systems in
selecting platform specific code. The
recommended form of the property value is:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;manufacturer,model&quot;</span></code></p>
<p>For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">compatible</span> <span class="pre">=</span> <span class="pre">&quot;fsl,mpc8572ds&quot;</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">serial-number</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Specifies a string representing the device’s
serial number.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">chassis-type</span></code></p></td>
<td><p>OR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Specifies a string that identifies the form-factor
of the system. The property value can be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;desktop&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;laptop&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;convertible&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;server&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;all-in-one&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;tablet&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;handset&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;watch&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;embedded&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;television&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;spectacles&quot;</span></code></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
</section>
<section id="aliases-node">
<h3><span class="section-number">3.3. </span><code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node<a class="headerlink" href="#aliases-node" title="Link to this heading">¶</a></h3>
<p>A devicetree may have an aliases node (<code class="docutils literal notranslate"><span class="pre">/aliases</span></code>) that defines one or
more alias properties. The alias node shall be at the root of the devicetree
and have the node name <code class="docutils literal notranslate"><span class="pre">/aliases</span></code>.</p>
<p>Each property of the <code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node defines an alias. The property name
specifies the alias name. The property value specifies the full path to
a node in the devicetree. For example, the property serial0 =
<code class="docutils literal notranslate"><span class="pre">&quot;/simple-bus&#64;fe000000/serial&#64;llc500&quot;</span></code> defines the alias <code class="docutils literal notranslate"><span class="pre">serial0</span></code>.</p>
<p>Alias names shall be lowercase text strings of 1 to 31 characters from
the following set of characters.</p>
<table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 3.2 </span><span class="caption-text">Valid characters for alias names</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0-9</p></td>
<td><p>digit</p></td>
</tr>
<tr class="row-odd"><td><p>a-z</p></td>
<td><p>lowercase letter</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>dash</p></td>
</tr>
</tbody>
</table>
<p>An alias value is a device path and is encoded as a string. The value
represents the full path to a node, but the path does not need to refer
to a leaf node.</p>
<p>A client program may use an alias property name to refer to a full
device path as all or part of its string value. A client program, when
considering a string as a device path, shall detect and use the alias.</p>
<p><strong>Example</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">aliases</span> <span class="p">{</span>
    <span class="nf">serial0</span> <span class="o">=</span> <span class="s">&quot;/simple-bus@fe000000/serial@llc500&quot;</span><span class="p">;</span>
    <span class="nf">ethernet0</span> <span class="o">=</span> <span class="s">&quot;/simple-bus@fe000000/ethernet@31c000&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Given the alias <code class="docutils literal notranslate"><span class="pre">serial0</span></code>, a client program can look at the <code class="docutils literal notranslate"><span class="pre">/aliases</span></code> node
and determine the alias refers to the device path
<code class="docutils literal notranslate"><span class="pre">/simple-bus&#64;fe000000/serial&#64;llc500</span></code>.</p>
</section>
<section id="memory-node">
<h3><span class="section-number">3.4. </span><code class="docutils literal notranslate"><span class="pre">/memory</span></code> node<a class="headerlink" href="#memory-node" title="Link to this heading">¶</a></h3>
<p>A memory device node is required for all devicetrees and describes the
physical memory layout for the system. If a system has multiple ranges
of memory, multiple memory nodes can be created, or the ranges can be
specified in the <em>reg</em> property of a single memory node.</p>
<p>The <em>unit-name</em> component of the node name
(see <a class="reference internal" href="#document-chapter2-devicetree-basics#sect-node-names"><span class="std std-numref">Section 2.2.1</span></a>)
shall be <code class="docutils literal notranslate"><span class="pre">memory</span></code>.</p>
<p>The client program may access memory not covered by any memory
reservations (see <a class="reference internal" href="#document-chapter5-flattened-format#sect-fdt-memory-reservation-block"><span class="std std-numref">Section 5.3</span></a>)
using any storage attributes it chooses. However, before changing the
storage attributes used to access a real page, the client program is
responsible for performing actions required by the architecture and
implementation, possibly including flushing the real page from the
caches. The boot program is responsible for ensuring that, without
taking any action associated with a change in storage attributes, the
client program can safely access all memory (including memory covered by
memory reservations) as WIMG = 0b001x. That is:</p>
<ul class="simple">
<li><p>not Write Through Required</p></li>
<li><p>not Caching Inhibited</p></li>
<li><p>Memory Coherence</p></li>
<li><p>Required either not Guarded or Guarded</p></li>
</ul>
<p>If the VLE storage attribute is supported, with VLE=0.</p>
<table class="docutils align-default" id="id9">
<caption><span class="caption-number">Table 3.3 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/memory</span></code> Node Properties</span><a class="headerlink" href="#id9" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">device_type</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Value shall be “memory”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reg</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Consists of an arbitrary number of address and
size pairs that specify the physical address
and size of the memory ranges.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial-mapped-area</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Specifies the address and size of the Initial
Mapped Area</p>
<p>Is a prop-encoded-array consisting of a
triplet of (effective address, physical
address, size). The effective and physical
address shall each be 64-bit (<code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code> value),
and the size shall be 32-bits (<code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> value).</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hotpluggable</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>Specifies an explicit hint to the operating
system that this memory may potentially be
removed later.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<section id="memory-node-and-uefi">
<h4><span class="section-number">3.4.1. </span><code class="docutils literal notranslate"><span class="pre">/memory</span></code> node and UEFI<a class="headerlink" href="#memory-node-and-uefi" title="Link to this heading">¶</a></h4>
<p>When booting via <a class="reference internal" href="#document-references#uefi" id="id1"><span>[UEFI]</span></a>, the system memory map is obtained via the
GetMemoryMap() UEFI boot time service as defined in <a class="reference internal" href="#document-references#uefi" id="id2"><span>[UEFI]</span></a> § 7.2,
and if present, the OS must ignore any <code class="docutils literal notranslate"><span class="pre">/memory</span></code> nodes.</p>
</section>
<section id="memory-examples">
<h4><span class="section-number">3.4.2. </span><code class="docutils literal notranslate"><span class="pre">/memory</span></code> Examples<a class="headerlink" href="#memory-examples" title="Link to this heading">¶</a></h4>
<p>Given a 64-bit Power system with the following physical memory layout:</p>
<ul class="simple">
<li><p>RAM: starting address 0x0, length 0x80000000 (2 GB)</p></li>
<li><p>RAM: starting address 0x100000000, length 0x100000000 (4 GB)</p></li>
</ul>
<p>Memory nodes could be defined as follows, assuming <code class="docutils literal notranslate"><span class="pre">#address-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">#size-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>.</p>
<p><strong>Example #1</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">memory</span><span class="nf">@0</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000000</span> <span class="mh">0x00000000</span> <span class="mh">0x00000000</span> <span class="mh">0x80000000</span>
           <span class="mh">0x000000001</span> <span class="mh">0x00000000</span> <span class="mh">0x00000001</span> <span class="mh">0x00000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Example #2</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">memory</span><span class="nf">@0</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000000</span> <span class="mh">0x00000000</span> <span class="mh">0x00000000</span> <span class="mh">0x80000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
<span class="nc">memory</span><span class="nf">@100000000</span> <span class="p">{</span>
    <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;memory&quot;</span><span class="p">;</span>
    <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x000000001</span> <span class="mh">0x00000000</span> <span class="mh">0x00000001</span> <span class="mh">0x00000000</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">reg</span></code> property is used to define the address and size of the two
memory ranges. The 2 GB I/O region is skipped. Note that the
<code class="docutils literal notranslate"><span class="pre">#address-cells</span></code> and <code class="docutils literal notranslate"><span class="pre">#size-cells</span></code> properties of the root node specify a
value of 2, which means that two 32-bit cells are required to define the
address and length for the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property of the memory node.</p>
</section>
</section>
<section id="reserved-memory-node">
<h3><span class="section-number">3.5. </span><code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> Node<a class="headerlink" href="#reserved-memory-node" title="Link to this heading">¶</a></h3>
<p>Reserved memory is specified as a node under the <code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> node.
The operating system shall exclude reserved memory from normal usage.
One can create child nodes describing particular reserved (excluded from
normal use) memory regions.
Such memory regions are usually designed for the special usage by various
device drivers.</p>
<p>Parameters for each memory region can be encoded into the device tree
with the following nodes:</p>
<section id="reserved-memory-parent-node">
<h4><span class="section-number">3.5.1. </span>/reserved-memory parent node<a class="headerlink" href="#reserved-memory-parent-node" title="Link to this heading">¶</a></h4>
<table class="docutils align-default" id="id10">
<caption><span class="caption-number">Table 3.4 </span><span class="caption-text">/reserved-memory Parent Node Properties</span><a class="headerlink" href="#id10" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the address in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> cells to
represent the size in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in
children of root.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranges</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></p></td>
<td><p>This property represents the mapping between
parent address to child address spaces (see
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-ranges"><span class="std std-numref">Section 2.3.8</span></a>,
ranges).</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code> and <code class="docutils literal notranslate"><span class="pre">#size-cells</span></code> should use the same values as for the root node,
and <code class="docutils literal notranslate"><span class="pre">ranges</span></code> should be empty so that address translation logic works correctly.</p>
</section>
<section id="reserved-memory-child-nodes">
<h4><span class="section-number">3.5.2. </span>/reserved-memory/ child nodes<a class="headerlink" href="#reserved-memory-child-nodes" title="Link to this heading">¶</a></h4>
<p>Each child of the reserved-memory node specifies one or more regions of
reserved memory. Each child node may either use a <code class="docutils literal notranslate"><span class="pre">reg</span></code> property to
specify a specific range of reserved memory, or a <code class="docutils literal notranslate"><span class="pre">size</span></code> property with
optional constraints to request a dynamically allocated block of memory.</p>
<p>Following the generic-names recommended practice, node names should
reflect the purpose of the node (ie. “<em>framebuffer</em>” or “<em>dma-pool</em>”).
Unit address (<code class="docutils literal notranslate"><span class="pre">&#64;&lt;address&gt;</span></code>) should be appended to the name if the node
is a static allocation.</p>
<p>A reserved memory node requires either a <code class="docutils literal notranslate"><span class="pre">reg</span></code> property for static
allocations, or a <code class="docutils literal notranslate"><span class="pre">size</span></code> property for dynamics allocations.
Dynamic allocations may use <code class="docutils literal notranslate"><span class="pre">alignment</span></code> and <code class="docutils literal notranslate"><span class="pre">alloc-ranges</span></code> properties
to constrain where the memory is allocated from.
If both <code class="docutils literal notranslate"><span class="pre">reg</span></code> and <code class="docutils literal notranslate"><span class="pre">size</span></code> are present, then the region is treated as a
static allocation with the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property taking precedence and <code class="docutils literal notranslate"><span class="pre">size</span></code>
is ignored.</p>
<table class="docutils align-default" id="id11">
<caption><span class="caption-number">Table 3.5 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/reserved-memory/</span></code> Child Node Properties</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reg</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Consists of an arbitrary number of address and
size pairs that specify the physical address
and size of the memory ranges.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Size in bytes of memory to reserve for
dynamically allocated regions.
Size of this property is based on parent node’s
<code class="docutils literal notranslate"><span class="pre">#size-cells</span></code> property.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alignment</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Address boundary for alignment of allocation.
Size of this property is based on parent node’s
<code class="docutils literal notranslate"><span class="pre">#size-cells</span></code> property.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alloc-ranges</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>Specifies regions of memory that are acceptable
to allocate from.
Format is (address, length pairs) tuples in
same format as for <code class="docutils literal notranslate"><span class="pre">reg</span></code> properties.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></p></td>
<td><p>May contain the following strings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shared-dma-pool</span></code>: This indicates a region of
memory meant to be used as a shared pool of DMA
buffers for a set of devices.
It can be used by an operating system to
instantiate the necessary pool management
subsystem if necessary.</p></li>
<li><p>vendor specific string in the form
<code class="docutils literal notranslate"><span class="pre">&lt;vendor&gt;,[&lt;device&gt;-]&lt;usage&gt;</span></code></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">no-map</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>If present, indicates the operating system must
not create a virtual mapping of the region as
part of its standard mapping of system memory,
nor permit speculative access to it under any
circumstances other than under the control of
the device driver using the region.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reusable</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>The operating system can use the memory in this
region with the limitation that the device
driver(s) owning the region need to be able to
reclaim it back.
Typically that means that the operating system
can use that region to store volatile or cached
data that can be otherwise regenerated or
migrated elsewhere.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">no-map</span></code> and <code class="docutils literal notranslate"><span class="pre">reusable</span></code> properties are mutually exclusive and both must
not be used together in the same node.</p>
<p>Linux implementation notes:</p>
<ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">linux,cma-default</span></code> property is present, then Linux will use the
region for the default pool of the contiguous memory allocator.</p></li>
<li><p>If a <code class="docutils literal notranslate"><span class="pre">linux,dma-default</span></code> property is present, then Linux will use the
region for the default pool of the consistent DMA allocator.</p></li>
</ul>
</section>
<section id="device-node-references-to-reserved-memory">
<h4><span class="section-number">3.5.3. </span>Device node references to reserved memory<a class="headerlink" href="#device-node-references-to-reserved-memory" title="Link to this heading">¶</a></h4>
<p>Regions in the <code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> node may be referenced by other device
nodes by adding a <code class="docutils literal notranslate"><span class="pre">memory-region</span></code> property to the device node.</p>
<table class="docutils align-default" id="id12">
<caption><span class="caption-number">Table 3.6 </span><span class="caption-text">Properties for referencing reserved-memory regions</span><a class="headerlink" href="#id12" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">memory-region</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
<td><p>phandle, specifier pairs to children of
<code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">memory-region-names</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;&gt;</span></code></p></td>
<td><p>A list of names, one for each corresponding
entry in the <code class="docutils literal notranslate"><span class="pre">memory-region</span></code> property</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reserved-memory-and-uefi">
<span id="sect-reserved-memory-uefi"></span><h4><span class="section-number">3.5.4. </span><code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> and UEFI<a class="headerlink" href="#reserved-memory-and-uefi" title="Link to this heading">¶</a></h4>
<p>When booting via <a class="reference internal" href="#document-references#uefi" id="id3"><span>[UEFI]</span></a>, static <code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> regions must
also be listed in the system memory map obtained via the GetMemoryMap()
UEFI boot time service as defined in <a class="reference internal" href="#document-references#uefi" id="id4"><span>[UEFI]</span></a> § 7.2.
The reserved memory regions need to be included in the UEFI memory map to
protect against allocations by UEFI applications.</p>
<p>Reserved regions with the <code class="docutils literal notranslate"><span class="pre">no-map</span></code> property must be listed in the memory
map with type <code class="docutils literal notranslate"><span class="pre">EfiReservedMemoryType</span></code>.
All other reserved regions must be listed with type <code class="docutils literal notranslate"><span class="pre">EfiBootServicesData</span></code>.</p>
<p>Dynamic reserved memory regions must not be listed in the <a class="reference internal" href="#document-references#uefi" id="id5"><span>[UEFI]</span></a> memory map
because they are allocated by the OS after exiting firmware boot services.</p>
</section>
<section id="reserved-memory-example">
<h4><span class="section-number">3.5.5. </span><code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> Example<a class="headerlink" href="#reserved-memory-example" title="Link to this heading">¶</a></h4>
<p>This example defines 3 contiguous regions are defined for Linux kernel:
one default of all device drivers (named <code class="docutils literal notranslate"><span class="pre">linux,cma</span></code> and 64MiB in size),
one dedicated to the framebuffer device (named <code class="docutils literal notranslate"><span class="pre">framebuffer&#64;78000000</span></code>, 8MiB), and
one for multimedia processing (named <code class="docutils literal notranslate"><span class="pre">multimedia&#64;77000000</span></code>, 64MiB).</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="k">/</span> <span class="p">{</span>
   <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
   <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>

   <span class="nc">memory</span> <span class="p">{</span>
      <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000000</span> <span class="mh">0x40000000</span><span class="p">&gt;;</span>
   <span class="p">};</span>

   <span class="nc">reserved-memory</span> <span class="p">{</span>
      <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
      <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
      <span class="nf">ranges</span><span class="p">;</span>

      <span class="cm">/* global autoconfigured region for contiguous allocations */</span>
      <span class="nc">linux,cma</span> <span class="p">{</span>
         <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;shared-dma-pool&quot;</span><span class="p">;</span>
         <span class="nf">reusable</span><span class="p">;</span>
         <span class="nf">size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4000000</span><span class="p">&gt;;</span>
         <span class="nf">alignment</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x2000</span><span class="p">&gt;;</span>
         <span class="nf">linux,cma-default</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="nl">display_reserved:</span> <span class="nc">framebuffer</span><span class="nf">@78000000</span> <span class="p">{</span>
         <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x78000000</span> <span class="mh">0x800000</span><span class="p">&gt;;</span>
      <span class="p">};</span>

      <span class="nl">multimedia_reserved:</span> <span class="nc">multimedia</span><span class="nf">@77000000</span> <span class="p">{</span>
         <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;acme,multimedia-memory&quot;</span><span class="p">;</span>
         <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x77000000</span> <span class="mh">0x4000000</span><span class="p">&gt;;</span>
      <span class="p">};</span>
   <span class="p">};</span>

   <span class="cm">/* ... */</span>

   <span class="nl">fb0:</span> <span class="nc">video</span><span class="nf">@12300000</span> <span class="p">{</span>
      <span class="nf">memory-region</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>display_reserved<span class="p">&gt;;</span>
      <span class="cm">/* ... */</span>
   <span class="p">};</span>

   <span class="nl">scaler:</span> <span class="nc">scaler</span><span class="nf">@12500000</span> <span class="p">{</span>
      <span class="nf">memory-region</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>multimedia_reserved<span class="p">&gt;;</span>
      <span class="cm">/* ... */</span>
   <span class="p">};</span>

   <span class="nl">codec:</span> <span class="nc">codec</span><span class="nf">@12600000</span> <span class="p">{</span>
      <span class="nf">memory-region</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>multimedia_reserved<span class="p">&gt;;</span>
      <span class="cm">/* ... */</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="chosen-node">
<h3><span class="section-number">3.6. </span><code class="docutils literal notranslate"><span class="pre">/chosen</span></code> Node<a class="headerlink" href="#chosen-node" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">/chosen</span></code> node does not represent a real device in the system but
describes parameters chosen or specified by the system firmware at run
time. It shall be a child of the root node.</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-number">Table 3.7 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/chosen</span></code> Node Properties</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bootargs</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A string that specifies the boot arguments for
the client program. The value could
potentially be a null string if no boot
arguments are required.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bootsource</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A string that specifies the full path to the
node representing the device the BootROM used
to load the initial boot program.
If the initial boot program is split into
multiple stages, this represents the storage
medium or device (e.g. used by fastboot) from
which the very first stage was loaded by the
BootROM.
It may differ from the device from which later
stages of the boot program or client program
are loaded from, as this property isn’t meant
to represent those devices.
A later stage of the boot program, or the
client program, may use this information to
favor the device in this property over others
for loading later stages, or know the storage
medium to flash an update to.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stdout-path</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A string that specifies the full path to the
node representing the device to be used for
boot console output. If the character “:” is
present in the value it terminates the path.
The value may be an alias.
If the stdin-path property is not specified,
stdout-path should be assumed to define the
input device.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stdin-path</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A string that specifies the full path to the
node representing the device to be used for
boot console input. If the character “:” is
present in the value it terminates the path.
The value may be an alias.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">chosen</span> <span class="p">{</span>
    <span class="nf">bootargs</span> <span class="o">=</span> <span class="s">&quot;root=/dev/nfs rw nfsroot=192.168.1.1 console=ttyS0,115200&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Older versions of devicetrees may be encountered that contain a
deprecated form of the <em>stdout-path</em> property called <em>linux,stdout-path</em>.
For compatibility, a client program might want to support
<em>linux,stdout-path</em> if a <em>stdout-path</em> property is not present. The meaning
and use of the two properties is identical.</p>
</section>
<section id="cpus-node-properties">
<h3><span class="section-number">3.7. </span><code class="docutils literal notranslate"><span class="pre">/cpus</span></code> Node Properties<a class="headerlink" href="#cpus-node-properties" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node is required for all devicetrees. It does not represent a
real device in the system, but acts as a container for child <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes
which represent the systems CPUs.</p>
<table class="docutils align-default" id="id14">
<caption><span class="caption-number">Table 3.8 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus</span></code> Node Properties</span><a class="headerlink" href="#id14" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>The value specifies how many cells each
element of the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property array takes in
children of this node.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#size-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Value shall be 0. Specifies that no size is
required in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property in children of
this node.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node may contain properties that are common across <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes.
See <a class="reference internal" href="#sect-cpus-cpu-node-properties"><span class="std std-numref">Section 3.8</span></a> for details.</p>
<p>For an example, see <a class="reference internal" href="#sect-cpu-node-example"><span class="std std-numref">Section 3.8.4</span></a>.</p>
</section>
<section id="cpus-cpu-node-properties">
<span id="sect-cpus-cpu-node-properties"></span><h3><span class="section-number">3.8. </span><code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node Properties<a class="headerlink" href="#cpus-cpu-node-properties" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">cpu</span></code> node represents a hardware execution block that is sufficiently
independent that it is capable of running an operating system without
interfering with other CPUs possibly running other operating systems.</p>
<p>Hardware threads that share an MMU would generally be represented under
one <code class="docutils literal notranslate"><span class="pre">cpu</span></code> node. If other more complex CPU topographies are designed, the
binding for the CPU must describe the topography (e.g. threads that
don’t share an MMU).</p>
<p>CPUs and threads are numbered through a unified number-space that should
match as closely as possible the interrupt controller’s numbering of
CPUs/threads.</p>
<p>Properties that have identical values across <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes may be placed in
the <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node instead. A client program must first examine a specific
<code class="docutils literal notranslate"><span class="pre">cpu</span></code> node, but if an expected property is not found then it should look
at the parent <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node. This results in a less verbose representation
of properties which are identical across all CPUs.</p>
<p>The node name for every CPU node should be <code class="docutils literal notranslate"><span class="pre">cpu</span></code>.</p>
<section id="general-properties-of-cpus-cpu-nodes">
<h4><span class="section-number">3.8.1. </span>General Properties of <code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> nodes<a class="headerlink" href="#general-properties-of-cpus-cpu-nodes" title="Link to this heading">¶</a></h4>
<p>The following table describes the general properties of <code class="docutils literal notranslate"><span class="pre">cpu</span></code> nodes. Some
of the properties described in <a class="reference internal" href="#table-cpu-node-props"><span class="std std-numref">Table 3.9</span></a> are select
standard properties with specific applicable detail.</p>
<span id="table-cpu-node-props"></span><table class="longtable docutils align-default" id="id15">
<caption><span class="caption-number">Table 3.9 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node General Properties</span><a class="headerlink" href="#id15" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">device_type</span></code></p></td>
<td><div class="line-block">
<div class="line">R</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></div>
</div>
</td>
<td><p>Value shall be <code class="docutils literal notranslate"><span class="pre">&quot;cpu&quot;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reg</span></code></p></td>
<td><p>R</p></td>
<td><p>array</p></td>
<td><p>The value of <em>reg</em> is a <code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code>
that defines a unique CPU/thread id for the
CPU/threads represented by the CPU node.</p>
<p>If a CPU supports more than one thread (i.e.
multiple streams of execution) the <em>reg</em>
property is an array with 1 element per
thread. The <em>#address-cells</em> on the <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node
specifies how many cells each element of the
array takes. Software can determine the number
of threads by dividing the size of <em>reg</em> by
the parent node’s <em>#address-cells</em>.</p>
<p>If a CPU/thread can be the target of an
external interrupt the <em>reg</em> property value
must be a unique CPU/thread id that is
addressable by the interrupt controller.</p>
<p>If a CPU/thread cannot be the target of an
external interrupt, then <em>reg</em> must be unique
and out of bounds of the range addressed by
the interrupt controller.</p>
<p>If a CPU/thread’s PIR (pending interrupt register)
is modifiable, a client
program should modify PIR to match the <em>reg</em>
property value. If PIR cannot be modified and
the PIR value is distinct from the interrupt
controller number space, the CPUs binding may
define a binding-specific representation of
PIR values if desired.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></p></td>
<td><div class="line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="line-block">
<div class="line">array</div>
</div>
</td>
<td><p>Specifies the clock speed of the CPU in Hertz,
if that is constant. The value is a
<code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> in one of two forms:</p>
<ul class="simple">
<li><p>A 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
specifying the frequency.</p></li>
<li><p>A 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code>
specifying the frequency.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timebase-frequency</span></code></p></td>
<td><div class="line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="line-block">
<div class="line">array</div>
</div>
</td>
<td><p>Specifies the current frequency at which the
timebase and decrementer registers are updated
(in Hertz). The value is a
&lt;prop-encoded-array&gt; in one of two forms:</p>
<ul class="simple">
<li><p>A 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
specifying the frequency.</p></li>
<li><p>A 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">status</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A standard property describing the state of a
CPU. This property shall be present for nodes
representing CPUs in a symmetric
multiprocessing (SMP) configuration. For a CPU
node the meaning of the <code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&quot;fail&quot;</span></code> values are as follows:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;okay&quot;</span></code> :</dt><dd><p>The CPU is running.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code> :</dt><dd><p>The CPU is in a quiescent state.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;fail&quot;</span></code> :</dt><dd><p>The CPU is not operational or does not exist.</p>
</dd>
</dl>
<p>A quiescent CPU is in a state where it cannot
interfere with the normal operation of other
CPUs, nor can its state be affected by the
normal operation of other running CPUs, except
by an explicit method for enabling or
re-enabling the quiescent CPU (see the
enable-method property).</p>
<p>In particular, a running CPU shall be able to
issue broadcast TLB invalidates without
affecting a quiescent CPU.</p>
<p>Examples: A quiescent CPU could be in a spin
loop, held in reset, and electrically isolated
from the system bus or in another
implementation dependent state.</p>
<p>A CPU with <code class="docutils literal notranslate"><span class="pre">&quot;fail&quot;</span></code> status does not affect the
system in any way.
The status is assigned to nodes for which no
corresponding CPU exists.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">enable-method</span></code></p></td>
<td><div class="line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;stringlist&gt;</span></code></div>
</div>
</td>
<td><p>Describes the method by which a CPU in a
disabled state is enabled. This property is
required for CPUs with a status property with
a value of <code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code>. The value consists of
one or more strings that define the method to
release this CPU. If a client program
recognizes any of the methods, it may use it.
The value shall be one of the following:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;spin-table&quot;</span></code> :</dt><dd><p>The CPU is enabled with the
spin table method defined in the DTSpec.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;[vendor],[method]&quot;</span></code> :</dt><dd><p>Implementation dependent string that
describes the method by which a CPU is
released from a <code class="docutils literal notranslate"><span class="pre">&quot;disabled&quot;</span></code> state. The
required format is: <code class="docutils literal notranslate"><span class="pre">&quot;[vendor],[method]&quot;</span></code>,
where vendor is a string describing the name of
the manufacturer and method is a string
describing the vendor specific mechanism.</p>
</dd>
</dl>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;fsl,MPC8572DS&quot;</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Other methods may be added to later
revisions of the DTSpec specification.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cpu-release-addr</span></code></p></td>
<td><div class="line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></div>
</div>
</td>
<td><p>The cpu-release-addr property is required for
cpu nodes that have an enable-method property
value of <code class="docutils literal notranslate"><span class="pre">&quot;spin-table&quot;</span></code>. The value specifies the
physical address of a spin table entry that
releases a secondary CPU from its spin loop.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<table class="longtable docutils align-default" id="id16">
<caption><span class="caption-number">Table 3.10 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpus/cpu*</span></code> Node Power ISA Properties</span><a class="headerlink" href="#id16" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">power-isa-version</span></code></p></td>
<td><div class="line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></div>
</div>
</td>
<td><p>A string that specifies the numerical portion
of the Power ISA version string. For example,
for an implementation complying with Power ISA
Version 2.06, the value of this property would
be <code class="docutils literal notranslate"><span class="pre">&quot;2.06&quot;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">power-isa-*</span></code></p></td>
<td><div class="line-block">
<div class="line">O</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></div>
</div>
</td>
<td><p>If the <code class="docutils literal notranslate"><span class="pre">power-isa-version</span></code> property exists, then
for each category from the Categories section
of Book I of the Power ISA version indicated,
the existence of a property named
<code class="docutils literal notranslate"><span class="pre">power-isa-[CAT]</span></code>, where <code class="docutils literal notranslate"><span class="pre">[CAT]</span></code> is the
abbreviated category name with all uppercase
letters converted to lowercase, indicates that
the category is supported by the
implementation.</p>
<p>For example, if the power-isa-version property
exists and its value is <code class="docutils literal notranslate"><span class="pre">&quot;2.06&quot;</span></code> and the
power-isa-e.hv property exists, then the
implementation supports
[Category:Embedded.Hypervisor] as defined in
Power ISA Version 2.06.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cache-op-block-size</span></code></p></td>
<td><div class="line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></div>
</div>
</td>
<td><p>Specifies the block size in bytes upon which
cache block instructions operate (e.g., dcbz).
Required if different than the L1 cache block
size.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reservation-granule-size</span></code></p></td>
<td><div class="line-block">
<div class="line">SD</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></div>
</div>
</td>
<td><p>Specifies the reservation granule size
supported by this processor in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mmu-type</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Specifies the CPU’s MMU type.</p>
<p>Valid values are shown below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mpc8xx&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ppc40x&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ppc440&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ppc476&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;power-embedded&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;powerpc-classic&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;power-server-stab&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;power-server-slb&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<p>Older versions of devicetree may be encountered that contain a
bus-frequency property on CPU nodes. For compatibility, a client-program
might want to support bus-frequency. The format of the value is
identical to that of clock-frequency. The recommended practice is to
represent the frequency of a bus on the bus node using a clock-frequency
property.</p>
</section>
<section id="tlb-properties">
<h4><span class="section-number">3.8.2. </span>TLB Properties<a class="headerlink" href="#tlb-properties" title="Link to this heading">¶</a></h4>
<p>The following properties of a cpu node describe the translate look-aside
buffer in the processor’s MMU.</p>
<table class="docutils align-default" id="id17">
<caption><span class="caption-number">Table 3.11 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*</span></code> Node Power ISA TLB Properties</span><a class="headerlink" href="#id17" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tlb-split</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>If present specifies that the TLB has a split
configuration, with separate TLBs for
instructions and data. If absent, specifies
that the TLB has a unified configuration.
Required for a CPU with a TLB in a split
configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tlb-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of entries in the TLB.
Required for a CPU with a unified TLB for
instruction and data addresses.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tlb-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
the TLB. Required for a CPU with a unified TLB
for instruction and data addresses.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d-tlb-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of entries in the data
TLB. Required for a CPU with a split TLB
configuration.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d-tlb-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
the data TLB. Required for a CPU with a split
TLB configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i-tlb-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of entries in the
instruction TLB. Required for a CPU with a
split TLB configuration.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i-tlb-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
the instruction TLB. Required for a CPU with a
split TLB configuration.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
</section>
<section id="internal-l1-cache-properties">
<h4><span class="section-number">3.8.3. </span>Internal (L1) Cache Properties<a class="headerlink" href="#internal-l1-cache-properties" title="Link to this heading">¶</a></h4>
<p>The following properties of a cpu node describe the processor’s internal
(L1) cache.</p>
<table class="docutils align-default" id="id18">
<caption><span class="caption-number">Table 3.12 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*</span></code> Node Power ISA Cache Properties</span><a class="headerlink" href="#id18" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cache-unified</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>If present, specifies the cache has a unified
organization. If not present, specifies that
the cache has a Harvard architecture with
separate caches for instructions and data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the size in bytes of a unified
cache. Required if the cache is unified
(combined instructions and data).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cache-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
a unified cache. Required if the cache is
unified (combined instructions and data).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache-block-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the block size in bytes of a unified
cache. Required if the processor has a unified
cache (combined instructions and data).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cache-line-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the line size in bytes of a unified
cache, if different than the cache block size.
Required if the processor has a unified cache
(combined instructions and data).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i-cache-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the size in bytes of the instruction
cache. Required if the cpu has a separate
cache for instructions.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i-cache-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
the instruction cache. Required if the cpu has
a separate cache for instructions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i-cache-block-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the block size in bytes of the
instruction cache. Required if the cpu has a
separate cache for instructions.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i-cache-line-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the line size in bytes of the
instruction cache, if different than the cache
block size. Required if the cpu has a separate
cache for instructions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d-cache-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the size in bytes of the data cache.
Required if the cpu has a separate cache for
data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d-cache-sets</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the number of associativity sets in
the data cache. Required if the cpu has a
separate cache for data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d-cache-block-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the block size in bytes of the data
cache. Required if the cpu has a separate
cache for data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d-cache-line-size</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the line size in bytes of the data
cache, if different than the cache block size.
Required if the cpu has a separate cache for
data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">next-level-cache</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></p></td>
<td><p>If present, indicates that another level of
cache exists. The value is the phandle of the
next level of cache. The phandle value type is
fully described in <a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-phandle"><span class="std std-numref">Section 2.3.3</span></a>.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<p>Older versions of devicetrees may be encountered that contain a
deprecated form of the next-level-cache property called <code class="docutils literal notranslate"><span class="pre">l2-cache</span></code>.
For compatibility, a client-program may wish to support <code class="docutils literal notranslate"><span class="pre">l2-cache</span></code>
if a next-level-cache property is not present.
The meaning and use of the two properties is identical.</p>
</section>
<section id="example">
<span id="sect-cpu-node-example"></span><h4><span class="section-number">3.8.4. </span>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h4>
<p>Here is an example of a <code class="docutils literal notranslate"><span class="pre">/cpus</span></code> node with one child cpu node:</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">cpus</span> <span class="p">{</span>
    <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
    <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
    <span class="nc">cpu</span><span class="nf">@0</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">d-cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// L1 - 32 bytes</span>
        <span class="nf">i-cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// L1 - 32 bytes</span>
        <span class="nf">d-cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32K</span>
        <span class="nf">i-cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32K</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">825000000</span><span class="p">&gt;;</span> <span class="c1">// 825 MHz</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="multi-level-and-shared-cache-nodes-cpus-cpu-l-cache">
<h3><span class="section-number">3.9. </span>Multi-level and Shared Cache Nodes (<code class="docutils literal notranslate"><span class="pre">/cpus/cpu*/l?-cache</span></code>)<a class="headerlink" href="#multi-level-and-shared-cache-nodes-cpus-cpu-l-cache" title="Link to this heading">¶</a></h3>
<p>Processors and systems may implement additional levels of cache hierarchy.
For example, second-level (L2) or third-level (L3) caches.
These caches can potentially be tightly integrated to the CPU or
possibly shared between multiple CPUs.</p>
<p>A device node with a compatible value of <code class="docutils literal notranslate"><span class="pre">&quot;cache&quot;</span></code> describes these types
of caches.</p>
<p>The cache node shall define a phandle property, and all cpu nodes or
cache nodes that are associated with or share the cache each shall
contain a next-level-cache property that specifies the phandle to the
cache node.</p>
<p>A cache node may be represented under a CPU node or any other
appropriate location in the devicetree.</p>
<p>Multiple-level and shared caches are represented with the properties in
Table 3-9. The L1 cache properties are described in Table 3-8.</p>
<table class="docutils align-default" id="id19">
<caption><span class="caption-number">Table 3.13 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/cpu/cpu*/l?-cache</span></code> Node Power ISA Multiple-level and Shared Cache Properties</span><a class="headerlink" href="#id19" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>A standard property. The value shall include
the string <code class="docutils literal notranslate"><span class="pre">&quot;cache&quot;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache-level</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the level in the cache hierarchy.
For example, a level 2 cache has a value of 2.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
<section id="id6">
<h4><span class="section-number">3.9.1. </span>Example<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<p>See the following example of a devicetree representation of two CPUs,
each with their own on-chip L2 and a shared L3.</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">cpus</span> <span class="p">{</span>
    <span class="nf">#address-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
    <span class="nf">#size-cells</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
    <span class="nc">cpu</span><span class="nf">@0</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">0</span><span class="p">&gt;;</span>
        <span class="nf">cache-unified</span><span class="p">;</span>
        <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32 KB</span>
        <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L2_0<span class="p">&gt;;</span> <span class="c1">// phandle to L2</span>

        <span class="nl">L2_0:</span><span class="nc">l2-cache</span> <span class="p">{</span>
            <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
            <span class="nf">cache-unified</span><span class="p">;</span>
            <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>

            <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1024</span><span class="p">&gt;;</span>
            <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
            <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
            <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L3<span class="p">&gt;;</span> <span class="c1">// phandle to L3</span>

            <span class="nl">L3:</span><span class="nc">l3-cache</span> <span class="p">{</span>
                <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
                <span class="nf">cache-unified</span><span class="p">;</span>
                <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>
                <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x400</span><span class="p">&gt;;</span> <span class="c1">// 1024</span>
                <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
                <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">3</span><span class="p">&gt;;</span>
            <span class="p">};</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="nc">cpu</span><span class="nf">@1</span> <span class="p">{</span>
        <span class="nf">device_type</span> <span class="o">=</span> <span class="s">&quot;cpu&quot;</span><span class="p">;</span>
        <span class="nf">reg</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">1</span><span class="p">&gt;;</span>
        <span class="nf">cache-unified</span><span class="p">;</span>
        <span class="nf">cache-block-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span>
        <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x8000</span><span class="p">&gt;;</span> <span class="c1">// L1, 32 KB</span>
        <span class="nf">timebase-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">82500000</span><span class="p">&gt;;</span> <span class="c1">// 82.5 MHz</span>
        <span class="nf">clock-frequency</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">825000000</span><span class="p">&gt;;</span> <span class="c1">// 825 MHz</span>
        <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L2_1<span class="p">&gt;;</span> <span class="c1">// phandle to L2</span>
        <span class="nl">L2_1:</span><span class="nc">l2-cache</span> <span class="p">{</span>
            <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span>
            <span class="nf">cache-unified</span><span class="p">;</span>
            <span class="nf">cache-level</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">2</span><span class="p">&gt;;</span>
            <span class="nf">cache-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x40000</span><span class="p">&gt;;</span> <span class="c1">// 256 KB</span>
            <span class="nf">cache-sets</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x400</span><span class="p">&gt;;</span> <span class="c1">// 1024</span>
            <span class="nf">cache-line-size</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mi">32</span><span class="p">&gt;;</span> <span class="c1">// 32 bytes</span>
            <span class="nf">next-level-cache</span> <span class="o">=</span> <span class="p">&lt;</span><span class="o">&amp;</span>L3<span class="p">&gt;;</span> <span class="c1">// phandle to L3</span>
        <span class="p">};</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<span id="document-chapter4-device-bindings"></span><section id="device-bindings">
<span id="chapter-device-bindings"></span><h2><span class="section-number">4. </span>Device Bindings<a class="headerlink" href="#device-bindings" title="Link to this heading">¶</a></h2>
<p>This chapter contains requirements, known as bindings, for how specific
types and classes of devices are represented in the devicetree. The
compatible property of a device node describes the specific binding (or
bindings) to which the node complies.</p>
<p>Bindings may be defined as extensions of each other. For example, a new
bus type could be defined as an extension of the simple-bus binding. In
this case, the compatible property would contain several strings
identifying each binding—from the most specific to the most general (see
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-compatible"><span class="std std-numref">Section 2.3.1</span></a>, compatible).</p>
<section id="binding-guidelines">
<h3><span class="section-number">4.1. </span>Binding Guidelines<a class="headerlink" href="#binding-guidelines" title="Link to this heading">¶</a></h3>
<section id="general-principles">
<h4><span class="section-number">4.1.1. </span>General Principles<a class="headerlink" href="#general-principles" title="Link to this heading">¶</a></h4>
<p>When creating a new devicetree representation for a device, a binding
should be created that fully describes the required properties and value
of the device. This set of properties shall be sufficiently descriptive
to provide device drivers with needed attributes of the device.</p>
<p>Some recommended practices include:</p>
<ol class="arabic">
<li><p>Define a compatible string using the conventions described in
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-compatible"><span class="std std-numref">Section 2.3.1</span></a>.</p></li>
<li><p>Use the standard properties (defined in
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a> and
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-interrupts"><span class="std std-numref">Section 2.4</span></a>) as
applicable for the new device. This usage typically includes the
<code class="docutils literal notranslate"><span class="pre">reg</span></code> and <code class="docutils literal notranslate"><span class="pre">interrupts</span></code> properties at a minimum.</p></li>
<li><p>Use the conventions specified in <a class="reference internal" href="#chapter-device-bindings"><span class="std std-numref">Section 4</span></a>
(Device Bindings) if the new device fits into one the DTSpec defined
device classes.</p></li>
<li><p>Use the miscellaneous property conventions specified in
<a class="reference internal" href="#sect-misc-properties"><span class="std std-numref">Section 4.1.2</span></a>, if applicable.</p></li>
<li><p>If new properties are needed by the binding, the recommended format
for property names is: <code class="docutils literal notranslate"><span class="pre">&quot;&lt;company&gt;,&lt;property-name&gt;&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;company&gt;</span></code>
is an OUI or short unique string like a stock ticker that identifies
the creator of the binding.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;ibm,ppc-interrupt-server#s&quot;</span></code></p>
</li>
</ol>
</section>
<section id="miscellaneous-properties">
<span id="sect-misc-properties"></span><h4><span class="section-number">4.1.2. </span>Miscellaneous Properties<a class="headerlink" href="#miscellaneous-properties" title="Link to this heading">¶</a></h4>
<p>This section defines a list of helpful properties that might be
applicable to many types of devices and device classes. They are defined
here to facilitate standardization of names and usage.</p>
<section id="clock-frequency-property">
<h5><span class="section-number">4.1.2.1. </span><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property<a class="headerlink" href="#clock-frequency-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id3">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies the frequency of a clock in Hz. The value is a
<code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> in one of two forms:</p>
<p>a 32-bit integer consisting of one <code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code> specifying the
frequency.</p>
<p>a 64-bit integer represented as a <code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code> specifying the
frequency.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="reg-shift-property">
<h5><span class="section-number">4.1.2.2. </span><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> Property<a class="headerlink" href="#reg-shift-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 4.2 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> Property</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> property provides a mechanism to represent
devices that are identical in most respects except for the
number of bytes between registers. The <code class="docutils literal notranslate"><span class="pre">reg-shift</span></code> property
specifies in bytes how far the discrete device registers are
separated from each other. The individual register location
is calculated by using following formula: “registers address”
&lt;&lt; reg-shift. If unspecified, the default value is 0.</p>
<p>For example, in a system where 16540 UART registers are
located at addresses 0x0, 0x4, 0x8, 0xC, 0x10, 0x14, 0x18,
and 0x1C, a <code class="docutils literal notranslate"><span class="pre">reg-shift</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code>
property would be used to specify register locations.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="label-property">
<h5><span class="section-number">4.1.2.3. </span><code class="docutils literal notranslate"><span class="pre">label</span></code> Property<a class="headerlink" href="#label-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id5">
<caption><span class="caption-number">Table 4.3 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">label</span></code> Property</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>The label property defines a human-readable string describing
a device. The binding for a given device specifies the exact
meaning of the property for that device.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="serial-devices">
<h3><span class="section-number">4.2. </span>Serial devices<a class="headerlink" href="#serial-devices" title="Link to this heading">¶</a></h3>
<section id="serial-class-binding">
<h4><span class="section-number">4.2.1. </span>Serial Class Binding<a class="headerlink" href="#serial-class-binding" title="Link to this heading">¶</a></h4>
<p>The class of serial devices consists of various types of point-to-point
serial line devices. Examples of serial line devices include the 8250
UART, 16550 UART, HDLC device, and BISYNC device. In most cases, hardware
compatible with the RS-232 standard fits into the serial device class.</p>
<p>I<sup>2</sup>C and SPI (Serial Peripheral Interface) devices shall not
be represented as serial port devices because they have their own
specific representation.</p>
<section id="id1">
<h5><span class="section-number">4.2.1.1. </span><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> Property<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 4.4 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">clock-frequecy</span></code> Property</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies the frequency in Hertz of the baud rate generator’s
input clock.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">clock-frequency</span> <span class="pre">=</span> <span class="pre">&lt;100000000&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="current-speed-property">
<h5><span class="section-number">4.2.1.2. </span><code class="docutils literal notranslate"><span class="pre">current-speed</span></code> Property<a class="headerlink" href="#current-speed-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 4.5 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">current-speed</span></code> Property</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">current-speed</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies the current speed of a serial device in bits per
second. A boot program should set this property if it has
initialized the serial device.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p>115,200 Baud: <code class="docutils literal notranslate"><span class="pre">current-speed</span> <span class="pre">=</span> <span class="pre">&lt;115200&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="national-semiconductor-16450-16550-compatible-uart-requirements">
<h4><span class="section-number">4.2.2. </span>National Semiconductor 16450/16550 Compatible UART Requirements<a class="headerlink" href="#national-semiconductor-16450-16550-compatible-uart-requirements" title="Link to this heading">¶</a></h4>
<p>Serial devices compatible to the National Semiconductor 16450/16550 UART
(Universal Asynchronous Receiver Transmitter) should be represented in
the devicetree using following properties.</p>
<table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 4.6 </span><span class="caption-text">ns16550 UART Properties</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>R</p></td>
<td><p>&lt;string list&gt;</p></td>
<td><p>Value shall include “ns16550”.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies the frequency (in Hz) of the baud
rate generator’s input clock.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">current-speed</span></code></p></td>
<td><p>OR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies current serial device speed in bits
per second.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reg</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></p></td>
<td><p>Specifies the physical address of the
registers device within the address space of
the parent bus.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interrupts</span></code></p></td>
<td><p>OR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></p></td>
<td><p>Specifies the interrupts generated by this
device. The value of the interrupts property
consists of one or more interrupt specifiers.
The format of an interrupt specifier is
defined by the binding document describing the
node’s interrupt parent.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reg-shift</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Specifies in bytes how far the discrete device
registers are separated from each other. The
individual register location is calculated by
using following formula: <code class="docutils literal notranslate"><span class="pre">&quot;registers</span> <span class="pre">address&quot;</span>
<span class="pre">&lt;&lt;</span> <span class="pre">reg-shift</span></code>. If unspecified, the default
value is 0.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">virtual-reg</span></code></p></td>
<td><p>SD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code>
or
<code class="docutils literal notranslate"><span class="pre">&lt;u64&gt;</span></code></p></td>
<td><p>See <a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-virtual-reg"><span class="std std-numref">Section 2.3.7</span></a>.
Specifies an effective address that maps to the
first physical address specified in the <code class="docutils literal notranslate"><span class="pre">reg</span></code>
property. This property is required if this
device node is the system’s console.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
</section>
</section>
<section id="network-devices">
<h3><span class="section-number">4.3. </span>Network devices<a class="headerlink" href="#network-devices" title="Link to this heading">¶</a></h3>
<p>Network devices are packet oriented communication devices. Devices in
this class are assumed to implement the data link layer (layer 2) of the
seven-layer OSI model and use Media Access Control (MAC) addresses.
Examples of network devices include Ethernet, FDDI, 802.11, and
Token-Ring.</p>
<section id="network-class-binding">
<h4><span class="section-number">4.3.1. </span>Network Class Binding<a class="headerlink" href="#network-class-binding" title="Link to this heading">¶</a></h4>
<section id="address-bits-property">
<h5><span class="section-number">4.3.1.1. </span><code class="docutils literal notranslate"><span class="pre">address-bits</span></code> Property<a class="headerlink" href="#address-bits-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id9">
<caption><span class="caption-number">Table 4.7 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">address-bits</span></code> Property</span><a class="headerlink" href="#id9" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">address-bits</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies number of address bits required to address the
device described by this node. This property specifies number
of bits in MAC address. If unspecified, the default value is 48.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">address-bits</span> <span class="pre">=</span> <span class="pre">&lt;48&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="local-mac-address-property">
<h5><span class="section-number">4.3.1.2. </span><code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code> Property<a class="headerlink" href="#local-mac-address-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id10">
<caption><span class="caption-number">Table 4.8 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code> Property</span><a class="headerlink" href="#id10" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">local-mac-address</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an array of hex numbers.</p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies MAC address that was assigned to the network device
described by the node containing this property.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">local-mac-address</span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">00</span> <span class="pre">00</span> <span class="pre">12</span> <span class="pre">34</span> <span class="pre">56</span> <span class="pre">78</span> <span class="pre">];</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="mac-address-property">
<h5><span class="section-number">4.3.1.3. </span><code class="docutils literal notranslate"><span class="pre">mac-address</span></code> Property<a class="headerlink" href="#mac-address-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id11">
<caption><span class="caption-number">Table 4.9 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">mac-address</span></code> Property</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">mac-address</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop-encoded-array&gt;</span></code> encoded as an array of hex numbers.</p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies the MAC address that was last used by the boot
program. This property should be used in cases where the MAC
address assigned to the device by the boot program is
different from the local-mac-address property. This property
shall be used only if the value differs from
local-mac-address property value.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mac-address</span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">02</span> <span class="pre">03</span> <span class="pre">04</span> <span class="pre">05</span> <span class="pre">06</span> <span class="pre">07</span> <span class="pre">];</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="max-frame-size-property">
<h5><span class="section-number">4.3.1.4. </span><code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code> Property<a class="headerlink" href="#max-frame-size-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id12">
<caption><span class="caption-number">Table 4.10 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code> Property</span><a class="headerlink" href="#id12" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">max-frame-size</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies maximum packet length in bytes that the physical
interface can send and receive.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max-frame-size</span> <span class="pre">=</span> <span class="pre">&lt;1518&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="ethernet-specific-considerations">
<h4><span class="section-number">4.3.2. </span>Ethernet specific considerations<a class="headerlink" href="#ethernet-specific-considerations" title="Link to this heading">¶</a></h4>
<p>Network devices based on the IEEE 802.3 collections of LAN standards
(collectively referred to as Ethernet) may be represented in the devicetree
using following properties, in addition to properties specified of
the network device class.</p>
<p>The properties listed in this section augment the properties listed in
the network device class.</p>
<section id="max-speed-property">
<h5><span class="section-number">4.3.2.1. </span><code class="docutils literal notranslate"><span class="pre">max-speed</span></code> Property<a class="headerlink" href="#max-speed-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id13">
<caption><span class="caption-number">Table 4.11 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">max-speed</span></code> Property</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">max-speed</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies maximum speed (specified in megabits per second)
supported the device.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max-speed</span> <span class="pre">=</span> <span class="pre">&lt;1000&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="phy-connection-type-property">
<h5><span class="section-number">4.3.2.2. </span><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property<a class="headerlink" href="#phy-connection-type-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id14">
<caption><span class="caption-number">Table 4.12 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property</span><a class="headerlink" href="#id14" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies interface type between the Ethernet device and a
physical layer (PHY) device. The value of this property is
specific to the implementation.</p>
<p>Recommended values are shown in the following table.</p>
</td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">phy-connection-type</span> <span class="pre">=</span> <span class="pre">&quot;mii&quot;;</span></code></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id15">
<caption><span class="caption-number">Table 4.13 </span><span class="caption-text">Defined values for the <code class="docutils literal notranslate"><span class="pre">phy-connection-type</span></code> Property</span><a class="headerlink" href="#id15" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Connection type</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mii</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Reduced Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rmii</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Gigabit Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gmii</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Reduced Gigabit Media Independent</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rgmii</span></code></p></td>
</tr>
<tr class="row-even"><td><p>rgmii with internal delay</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rgmii-id</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>rgmii with internal delay on TX only</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rgmii-txid</span></code></p></td>
</tr>
<tr class="row-even"><td><p>rgmii with internal delay on RX only</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rgmii-rxid</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Ten Bit Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tbi</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Reduced Ten Bit Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rtbi</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Serial Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">smii</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Serial Gigabit Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sgmii</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Reverse Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rev-mii</span></code></p></td>
</tr>
<tr class="row-even"><td><p>10 Gigabits Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xgmii</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Multimedia over Coaxial</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">moca</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Quad Serial Gigabit Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">qsgmii</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Turbo Reduced Gigabit Media Independent Interface</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">trgmii</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="phy-handle-property">
<h5><span class="section-number">4.3.2.3. </span><code class="docutils literal notranslate"><span class="pre">phy-handle</span></code> Property<a class="headerlink" href="#phy-handle-property" title="Link to this heading">¶</a></h5>
<table class="docutils align-default" id="id16">
<caption><span class="caption-number">Table 4.14 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phy-handle</span></code> Property</span><a class="headerlink" href="#id16" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">phy-handle</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;phandle&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Specifies a reference to a node representing a physical layer
(PHY) device connected to this Ethernet device. This property
is required in case where the Ethernet device is connected to
a physical layer device.</p></td>
</tr>
<tr class="row-even"><td><p>Example</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">phy-handle</span> <span class="pre">=</span> <span class="pre">&lt;&amp;PHY0&gt;;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="power-isa-open-pic-interrupt-controllers">
<h3><span class="section-number">4.4. </span>Power ISA Open PIC Interrupt Controllers<a class="headerlink" href="#power-isa-open-pic-interrupt-controllers" title="Link to this heading">¶</a></h3>
<p>This section specifies the requirements for representing Open PIC
compatible interrupt controllers. An Open PIC interrupt controller
implements the Open PIC architecture (developed jointly by AMD and
Cyrix) and specified in The Open Programmable Interrupt Controller (PIC)
Register Interface Specification Revision 1.2 <a class="reference internal" href="#document-references#b18" id="id2"><span>[b18]</span></a>.</p>
<p>Interrupt specifiers in an Open PIC interrupt domain are encoded with
two cells. The first cell defines the interrupt number. The second cell
defines the sense and level information.</p>
<p>Sense and level information shall be encoded as follows in interrupt
specifiers:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0 = low to high edge sensitive type enabled
1 = active low level sensitive type enabled
2 = active high level sensitive type enabled
3 = high to low edge sensitive type enabled
</pre></div>
</div>
</div></blockquote>
<table class="docutils align-default" id="id17">
<caption><span class="caption-number">Table 4.15 </span><span class="caption-text">Open-PIC properties</span><a class="headerlink" href="#id17" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Value shall include <code class="docutils literal notranslate"><span class="pre">&quot;open-pic&quot;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reg</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></p></td>
<td><p>Specifies the physical address of the
registers device within the address space of
the parent bus.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interrupt-controller</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>Specifies that this node is an interrupt controller.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#interrupt-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Shall be 2.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#address-cells</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;u32&gt;</span></code></p></td>
<td><p>Shall be 0.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All other standard properties
(<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties"><span class="std std-numref">Section 2.3</span></a>) are allowed but are optional.</p>
</div>
</section>
<section id="simple-bus-compatible-value">
<span id="sect-bindings-simple-bus"></span><h3><span class="section-number">4.5. </span><code class="docutils literal notranslate"><span class="pre">simple-bus</span></code> Compatible Value<a class="headerlink" href="#simple-bus-compatible-value" title="Link to this heading">¶</a></h3>
<p>System-on-a-chip processors may have an internal I/O bus that cannot be
probed for devices. The devices on the bus can be accessed directly
without additional configuration required. This type of bus is
represented as a node with a compatible value of “simple-bus”.</p>
<table class="docutils align-default" id="id18">
<caption><span class="caption-number">Table 4.16 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">simple-bus</span></code> Compatible Node Properties</span><a class="headerlink" href="#id18" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Value Type</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compatible</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></p></td>
<td><p>Value shall include “simple-bus”.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranges</span></code></p></td>
<td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;prop</span> <span class="pre">encoded</span>
<span class="pre">array&gt;</span></code></p></td>
<td><p>This property represents the mapping between
parent address to child address spaces (see
<a class="reference internal" href="#document-chapter2-devicetree-basics#sect-standard-properties-ranges"><span class="std std-numref">Section 2.3.8</span></a>,
ranges).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nonposted-mmio</span></code></p></td>
<td><p>O</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;</span></code></p></td>
<td><p>Specifies that direct children of this bus
should use non-posted memory accesses (i.e. a
non-posted mapping mode) for MMIO ranges.</p></td>
</tr>
<tr class="row-odd"><td colspan="4"><p>Usage legend: R=Required, O=Optional, OR=Optional but Recommended, SD=See Definition</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<span id="document-chapter5-flattened-format"></span><section id="flattened-devicetree-dtb-format">
<span id="chapter-fdt-structure"></span><h2><span class="section-number">5. </span>Flattened Devicetree (DTB) Format<a class="headerlink" href="#flattened-devicetree-dtb-format" title="Link to this heading">¶</a></h2>
<p>The Devicetree Blob (DTB) format is a flat binary encoding of devicetree data.
It is used to exchange devicetree data between software programs.
For example, when booting an operating system, firmware will pass a DTB to the OS kernel.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IEEE1275 Open Firmware [IEEE1275] does not define the DTB format.
On most Open Firmware compliant platforms the devicetree is extracted by calling firmware methods
to walk through the tree structure.</p>
</div>
<p>The DTB format encodes the devicetree data within a single, linear, pointerless data structure.
It consists of a small header
(see <a class="reference internal" href="#sect-fdt-header"><span class="std std-numref">Section 5.2</span></a>),
followed by three variable sized sections:
the memory reservation block (see <a class="reference internal" href="#sect-fdt-memory-reservation-block"><span class="std std-numref">Section 5.3</span></a>),
the structure block (see <a class="reference internal" href="#sect-fdt-structure-block"><span class="std std-numref">Section 5.4</span></a>),
and the strings block (see <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-numref">Section 5.5</span></a>).
These should be present in the flattened devicetree in that order.
Thus, the devicetree structure as a whole, when loaded into memory at address,
will resemble the diagram in <a class="reference internal" href="#figure-device-tree-structure"><span class="std std-numref">Fig. 5.1</span></a>
(lower addresses are at the top of the diagram).</p>
<figure class="align-default" id="id2">
<span id="figure-device-tree-structure"></span><div class="graphviz"><img src="_images/graphviz-8c1c59124925f72654c8f593c8cdf1a9bf33f142.png" alt="digraph tree {
rankdir = LR
ranksep = &quot;1.5&quot;
size = &quot;6,8&quot;
edge [ dir=&quot;none&quot; ]
node [ shape=&quot;Mrecord&quot; width=&quot;2.5&quot; ]

&quot;node&quot; [ label = &quot;struct fdt_header |
   (free space) |
   memory reservation block |
   (free space) |
   structure block |
   (free space) |
   strings block |
   (free space)&quot; ]
}" class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 5.1 </span><span class="caption-text">Devicetree .dtb Structure</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The (free space) sections may not be present, though in some cases they
might be required to satisfy the alignment constraints of the individual
blocks (see <a class="reference internal" href="#sect-fdt-alignment"><span class="std std-numref">Section 5.6</span></a>).</p>
<section id="versioning">
<span id="sect-fdt-versioning"></span><h3><span class="section-number">5.1. </span>Versioning<a class="headerlink" href="#versioning" title="Link to this heading">¶</a></h3>
<p>Several versions of the flattened devicetree structure have been defined since
the original definition of the format. Fields in the header give the version,
so that the client program can determine if the devicetree is encoded in a
compatible format.</p>
<p>This document describes only version 17 of the format. DTSpec-compliant boot
programs shall provide a devicetree of version 17 or later, and should provide
a devicetree of a version that is backwards compatible with version 16.
DTSpec-compliant client programs shall accept devicetrees of any version
backwards compatible with version 17 and may accept other versions as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version is with respect to the binary structure of the device
tree, not its content.</p>
</div>
</section>
<section id="header">
<span id="sect-fdt-header"></span><h3><span class="section-number">5.2. </span>Header<a class="headerlink" href="#header" title="Link to this heading">¶</a></h3>
<p>The layout of the header for the devicetree is defined by the following
C structure. All the header fields are 32-bit integers, stored in
big-endian format.</p>
<p><strong>Flattened Devicetree Header Fields</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">fdt_header</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">magic</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">totalsize</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">off_dt_struct</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">off_dt_strings</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">off_mem_rsvmap</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">version</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">last_comp_version</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">boot_cpuid_phys</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">size_dt_strings</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">size_dt_struct</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">magic</span></code></dt><dd><p>This field shall contain the value 0xd00dfeed (big-endian).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">totalsize</span></code></dt><dd><p>This field shall contain the total size in bytes of the devicetree data structure.
This size shall encompass all sections of the structure:
the header, the memory reservation block, structure block and
strings block, as well as any free space gaps between the blocks or
after the final block.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_dt_struct</span></code></dt><dd><p>This field shall contain the offset in bytes of the structure block
(see <a class="reference internal" href="#sect-fdt-structure-block"><span class="std std-numref">Section 5.4</span></a>) from the beginning of the header.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_dt_strings</span></code></dt><dd><p>This field shall contain the offset in bytes of the strings block
(see <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-numref">Section 5.5</span></a>) from the beginning of the header.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">off_mem_rsvmap</span></code></dt><dd><p>This field shall contain the offset in bytes of the memory
reservation block (see <a class="reference internal" href="#sect-fdt-memory-reservation-block"><span class="std std-numref">Section 5.3</span></a>)
from the beginning of the header.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">version</span></code></dt><dd><p>This field shall contain the version of the devicetree data
structure. The version is 17 if using the structure as defined in
this document. An DTSpec boot program may provide the devicetree of
a later version, in which case this field shall contain the version
number defined in whichever later document gives the details of that
version.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_comp_version</span></code></dt><dd><p>This field shall contain the lowest version of the devicetree data
structure with which the version used is backwards compatible. So,
for the structure as defined in this document (version 17), this
field shall contain 16 because version 17 is backwards compatible
with version 16, but not earlier versions. As per
<a class="reference internal" href="#sect-fdt-versioning"><span class="std std-numref">Section 5.1</span></a>, a DTSpec boot program should provide a
devicetree in a format which is backwards compatible with version
16, and thus this field shall always contain 16.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">boot_cpuid_phys</span></code></dt><dd><p>This field shall contain the physical ID of the system’s boot CPU.
It shall be identical to the physical ID given in the <code class="docutils literal notranslate"><span class="pre">reg</span></code> property
of that CPU node within the devicetree.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_dt_strings</span></code></dt><dd><p>This field shall contain the length in bytes of the strings block
section of the devicetree blob.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_dt_struct</span></code></dt><dd><p>This field shall contain the length in bytes of the structure block
section of the devicetree blob.</p>
</dd>
</dl>
</section>
<section id="memory-reservation-block">
<span id="sect-fdt-memory-reservation-block"></span><h3><span class="section-number">5.3. </span>Memory Reservation Block<a class="headerlink" href="#memory-reservation-block" title="Link to this heading">¶</a></h3>
<section id="purpose">
<h4><span class="section-number">5.3.1. </span>Purpose<a class="headerlink" href="#purpose" title="Link to this heading">¶</a></h4>
<p>The <em>memory reservation block</em> provides the client program with a list
of areas in physical memory which are <em>reserved</em>; that is, which shall
not be used for general memory allocations. It is used to protect vital
data structures from being overwritten by the client program. For
example, on some systems with an IOMMU, the TCE (translation control
entry) tables initialized by a DTSpec boot program would need to be
protected in this manner. Likewise, any boot program code or data used
during the client program’s runtime would need to be reserved (e.g.,
RTAS on Open Firmware platforms). DTSpec does not require the boot
program to provide any such runtime components, but it does not prohibit
implementations from doing so as an extension.</p>
<p>More specifically, a client program shall not access memory in a
reserved region unless other information provided by the boot program
explicitly indicates that it shall do so. The client program may then
access the indicated section of the reserved memory in the indicated
manner. Methods by which the boot program can indicate to the client
program specific uses for reserved memory may appear in this document,
in optional extensions to it, or in platform-specific documentation.</p>
<p>The reserved regions supplied by a boot program may, but are not
required to, encompass the devicetree blob itself. The client program
shall ensure that it does not overwrite this data structure before it is
used, whether or not it is in the reserved areas.</p>
<p>Any memory that is declared in a memory node and is accessed by the boot
program or caused to be accessed by the boot program after client entry
must be reserved. Examples of this type of access include (e.g.,
speculative memory reads through a non-guarded virtual page).</p>
<p>This requirement is necessary because any memory that is not reserved
may be accessed by the client program with arbitrary storage attributes.</p>
<p>Any accesses to reserved memory by or caused by the boot program must be
done as not Caching Inhibited and Memory Coherence Required (i.e., WIMG
= 0bx01x), and additionally for Book III-S implementations as not Write
Through Required (i.e., WIMG = 0b001x). Further, if the VLE storage
attribute is supported, all accesses to reserved memory must be done as
VLE=0.</p>
<p>This requirement is necessary because the client program is permitted to
map memory with storage attributes specified as not Write Through
Required, not Caching Inhibited, and Memory Coherence Required (i.e.,
WIMG = 0b001x), and VLE=0 where supported. The client program may use
large virtual pages that contain reserved memory. However, the client
program may not modify reserved memory, so the boot program may perform
accesses to reserved memory as Write Through Required where conflicting
values for this storage attribute are architecturally permissible.</p>
</section>
<section id="format">
<h4><span class="section-number">5.3.2. </span>Format<a class="headerlink" href="#format" title="Link to this heading">¶</a></h4>
<p>The memory reservation block consists of a list of pairs of 64-bit
big-endian integers, each pair being represented by the following C
structure.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">fdt_reserve_entry</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Each pair gives the physical address and size in bytes of a reserved memory region.
These given regions shall not overlap each other. The list of
reserved blocks shall be terminated with an entry where both address and
size are equal to 0. Note that the address and size values are always
64-bit. On 32-bit CPUs the upper 32-bits of the value are ignored.</p>
<p>Each uint64_t in the memory reservation block, and thus the memory
reservation block as a whole, shall be located at an 8-byte aligned
offset from the beginning of the devicetree blob (see
<a class="reference internal" href="#sect-fdt-alignment"><span class="std std-numref">Section 5.6</span></a>).</p>
</section>
<section id="memory-reservation-block-and-uefi">
<h4><span class="section-number">5.3.3. </span>Memory Reservation Block and UEFI<a class="headerlink" href="#memory-reservation-block-and-uefi" title="Link to this heading">¶</a></h4>
<p>As with the <code class="docutils literal notranslate"><span class="pre">/reserved-memory</span></code> node (<a class="reference internal" href="#document-chapter3-devicenodes#sect-reserved-memory-uefi"><span class="std std-numref">Section 3.5.4</span></a>),
when booting via <a class="reference internal" href="#document-references#uefi" id="id1"><span>[UEFI]</span></a> entries in the Memory Reservation Block must also be
listed in the system memory map obtained via the GetMemoryMap() to protect against
allocations by UEFI applications.
The memory reservation block entries should be listed with type
<code class="docutils literal notranslate"><span class="pre">EfiReservedMemoryType</span></code>.</p>
</section>
</section>
<section id="structure-block">
<span id="sect-fdt-structure-block"></span><h3><span class="section-number">5.4. </span>Structure Block<a class="headerlink" href="#structure-block" title="Link to this heading">¶</a></h3>
<p>The structure block describes the structure and contents of the devicetree
itself. It is composed of a sequence of tokens with data, as described below.
These are organized into a linear tree structure, as described below.</p>
<p>Each token in the structure block, and thus the structure block itself,
shall be located at a 4-byte aligned offset from the beginning of the
devicetree blob (see <a class="reference internal" href="#sect-fdt-alignment"><span class="std std-numref">Section 5.6</span></a>).</p>
<section id="lexical-structure">
<span id="sect-fdt-lexical-structure"></span><h4><span class="section-number">5.4.1. </span>Lexical structure<a class="headerlink" href="#lexical-structure" title="Link to this heading">¶</a></h4>
<p>The structure block is composed of a sequence of pieces, each beginning
with a token, that is, a big-endian 32-bit integer. Some tokens are
followed by extra data, the format of which is determined by the token
value. All tokens shall be aligned on a 32-bit boundary, which may
require padding bytes (with a value of 0x0) to be inserted after the
previous token’s data.</p>
<p>The five token types are as follows:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_BEGIN_NODE</span></code> (0x00000001)</dt><dd><p>The FDT_BEGIN_NODE token marks the beginning of a node’s
representation. It shall be followed by the node’s unit name as
extra data. The name is stored as a null-terminated string, and
shall include the unit address (see <a class="reference internal" href="#document-chapter2-devicetree-basics#sect-node-names"><span class="std std-numref">Section 2.2.1</span></a>), if any.
The node name is followed by zeroed padding bytes, if necessary for
alignment, and then the next token, which may be any token except
FDT_END.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_END_NODE</span></code> (0x00000002)</dt><dd><p>The FDT_END_NODE token marks the end of a node’s representation.
This token has no extra data; so it is followed immediately by the
next token, which may be any token except FDT_PROP.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_PROP</span></code> (0x00000003)</dt><dd><p>The FDT_PROP token marks the beginning of the representation of one
property in the devicetree. It shall be followed by extra data
describing the property. This data consists first of the property’s
length and name represented as the following C structure:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">nameoff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Both the fields in this structure are 32-bit big-endian integers.</p>
<ul class="simple">
<li><p>len gives the length of the property’s value in bytes (which may be
zero, indicating an empty property, see <a class="reference internal" href="#document-chapter2-devicetree-basics#sect-property-values"><span class="std std-numref">Section 2.2.4.2</span></a>).</p></li>
<li><p>nameoff gives an offset into the strings block
(see <a class="reference internal" href="#sect-fdt-strings-block"><span class="std std-numref">Section 5.5</span></a>)
at which the property’s name is stored as a null-terminated string.</p></li>
</ul>
<p>After this structure, the property’s value is given as a byte string of
length len. This value is followed by zeroed padding bytes (if
necessary) to align to the next 32-bit boundary and then the next token,
which may be any token except FDT_END.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_NOP</span></code> (0x00000004)</dt><dd><p>The FDT_NOP token will be ignored by any program parsing the device
tree. This token has no extra data; so it is followed immediately by
the next token, which can be any valid token. A property or node
definition in the tree can be overwritten with FDT_NOP tokens to
remove it from the tree without needing to move other sections of
the tree’s representation in the devicetree blob.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FDT_END</span></code> (0x00000009)</dt><dd><p>The FDT_END token marks the end of the structure block. There shall
be only one FDT_END token, and it shall be the last token in the
structure block. It has no extra data; so the byte immediately after
the FDT_END token has offset from the beginning of the structure
block equal to the value of the size_dt_struct field in the device
tree blob header.</p>
</dd>
</dl>
</section>
<section id="tree-structure">
<h4><span class="section-number">5.4.2. </span>Tree structure<a class="headerlink" href="#tree-structure" title="Link to this heading">¶</a></h4>
<p>The devicetree structure is represented as a linear tree: the
representation of each node begins with an FDT_BEGIN_NODE token and
ends with an FDT_END_NODE token. The node’s properties and subnodes
(if any) are represented before the FDT_END_NODE, so that the
FDT_BEGIN_NODE and FDT_END_NODE tokens for those subnodes are nested
within those of the parent.</p>
<p>The structure block as a whole consists of the root node’s
representation (which contains the representations for all other nodes),
followed by an FDT_END token to mark the end of the structure block as
a whole.</p>
<p>More precisely, each node’s representation consists of the following
components:</p>
<ul>
<li><p>(optionally) any number of FDT_NOP tokens</p></li>
<li><p>FDT_BEGIN_NODE token</p>
<blockquote>
<div><ul class="simple">
<li><p>The node’s name as a null-terminated string</p></li>
<li><p>[zeroed padding bytes to align to a 4-byte boundary]</p></li>
</ul>
</div></blockquote>
</li>
<li><p>For each property of the node:</p>
<blockquote>
<div><ul>
<li><p>(optionally) any number of FDT_NOP tokens</p></li>
<li><p>FDT_PROP token</p>
<blockquote>
<div><ul class="simple">
<li><p>property information as given in <a class="reference internal" href="#sect-fdt-lexical-structure"><span class="std std-numref">Section 5.4.1</span></a></p></li>
<li><p>[zeroed padding bytes to align to a 4-byte boundary]</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Representations of all child nodes in this format</p></li>
<li><p>(optionally) any number of FDT_NOP tokens</p></li>
<li><p>FDT_END_NODE token</p></li>
</ul>
<p>Note that this process requires that all property definitions for a
particular node precede any subnode definitions for that node. Although
the structure would not be ambiguous if properties and subnodes were
intermingled, the code needed to process a flat tree is simplified by
this requirement.</p>
</section>
</section>
<section id="strings-block">
<span id="sect-fdt-strings-block"></span><h3><span class="section-number">5.5. </span>Strings Block<a class="headerlink" href="#strings-block" title="Link to this heading">¶</a></h3>
<p>The strings block contains strings representing all the property names
used in the tree. These null terminated strings are simply concatenated
together in this section, and referred to from the structure block by an
offset into the strings block.</p>
<p>The strings block has no alignment constraints and may appear at any
offset from the beginning of the devicetree blob.</p>
</section>
<section id="alignment">
<span id="sect-fdt-alignment"></span><h3><span class="section-number">5.6. </span>Alignment<a class="headerlink" href="#alignment" title="Link to this heading">¶</a></h3>
<p>The devicetree blob shall be located at an 8-byte-aligned address. To maintain
backwards compatibilty for 32-bit machines, 4-byte alignment is supported by
some software, but this is not DTSpec-compliant.</p>
<p>For the data in the memory reservation and structure blocks to be used
without unaligned memory accesses, they shall lie at suitably aligned
memory addresses. Specifically, the memory reservation block shall be
aligned to an 8-byte boundary and the structure block to a 4-byte
boundary.</p>
<p>Furthermore, the devicetree blob as a whole can be relocated without
destroying the alignment of the subblocks.</p>
<p>As described in the previous sections, the structure and strings blocks
shall have aligned offsets from the beginning of the devicetree blob.
To ensure the in-memory alignment of the blocks, it is sufficient to
ensure that the devicetree as a whole is loaded at an address aligned
to the largest alignment of any of the subblocks, that is, to an 8-byte
boundary. A DTSpec-compliant boot
program shall load the devicetree blob at such an aligned address
before passing it to the client program. If an DTSpec client program
relocates the devicetree blob in memory, it should only do so to
another 8-byte aligned address.</p>
</section>
</section>
<span id="document-chapter6-source-language"></span><section id="devicetree-source-dts-format-version-1">
<span id="chapter-devicetree-source-format"></span><h2><span class="section-number">6. </span>Devicetree Source (DTS) Format (version 1)<a class="headerlink" href="#devicetree-source-dts-format-version-1" title="Link to this heading">¶</a></h2>
<p>The Devicetree Source (DTS) format is a textual representation of a
devicetree in a form that can be processed by dtc into a binary
devicetree in the form expected by the kernel. The following description is
not a formal syntax definition of DTS, but describes the basic
constructs used to represent devicetrees.</p>
<p>The name of DTS files should end with “.dts”.</p>
<section id="compiler-directives">
<h3><span class="section-number">6.1. </span>Compiler directives<a class="headerlink" href="#compiler-directives" title="Link to this heading">¶</a></h3>
<p>Other source files can be included from a DTS file.  The name of include
files should end with “.dtsi”.  Included files can in turn include
additional files.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/include/ &quot;FILE&quot;
</pre></div>
</div>
</section>
<section id="labels">
<h3><span class="section-number">6.2. </span>Labels<a class="headerlink" href="#labels" title="Link to this heading">¶</a></h3>
<p>The source format allows labels to be attached to any node or property value in the devicetree.
Phandle and path references can be automatically generated by referencing a label instead of
explicitly specifying a phandle value or the full path to a node.
Labels are only used in the devicetree source format and are not encoded into the DTB binary.</p>
<p>A label shall be between 1 to 31 characters in length,
be composed only of the characters in the set <a class="reference internal" href="#label-characters"><span class="std std-numref">Table 6.1</span></a>,
and must not start with a number.</p>
<p>Labels are created by appending a colon (‘:’) to the label name.
References are created by prefixing the label name with an ampersand (’&amp;’).</p>
<span id="label-characters"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-number">Table 6.1 </span><span class="caption-text">Valid characters for DTS labels</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Character</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0-9</span></code></p></td>
<td><p>digit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a-z</span></code></p></td>
<td><p>lowercase letter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A-Z</span></code></p></td>
<td><p>uppercase letter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></td>
<td><p>underscore</p></td>
</tr>
</tbody>
</table>
</section>
<section id="node-and-property-definitions">
<h3><span class="section-number">6.3. </span>Node and property definitions<a class="headerlink" href="#node-and-property-definitions" title="Link to this heading">¶</a></h3>
<p>Devicetree nodes are defined with a node name and unit address with
braces marking the start and end of the node definition. They may be
preceded by a label.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] node-name[@unit-address] {
    [properties definitions]
    [child nodes]
};
</pre></div>
</div>
<p>Nodes may contain property definitions and/or child node definitions. If
both are present, properties shall come before child nodes.</p>
<p>Previously defined nodes may be deleted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/delete-node/ node-name;
/delete-node/ &amp;label;
</pre></div>
</div>
<p>Property definitions are name value pairs in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] property-name = value;
</pre></div>
</div>
<p>except for properties with empty (zero length) value which have the
form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[label:] property-name;
</pre></div>
</div>
<p>Previously defined properties may be deleted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/delete-property/ property-name;
</pre></div>
</div>
<p>Property values may be defined as an array of 32-bit integer cells, as
null-terminated strings, as bytestrings or a combination of these.</p>
<ul class="simple">
<li><p>Arrays of cells are represented by angle brackets surrounding a space
separated list of C-style integers. Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupts = &lt;17 0xc&gt;;
</pre></div>
</div>
<ul class="simple">
<li><p>values may be represented as arithmetic, bitwise, or logical expressions
within parenthesis.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Arithmetic operators

+   add
-   subtract
*   multiply
/   divide
%   modulo
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bitwise operators

&amp;    and
|    or
^    exclusive or
~    not
&lt;&lt;  left shift
&gt;&gt;  right shift
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Logical operators

&amp;&amp;   and
||   or
!    not
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Relational operators

&lt;    less than
&gt;    greater than
&lt;=   less than or equal
&gt;=   greater than or equal
==   equal
!=   not equal
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Ternary operators

?:   (condition ? value_if_true : value_if_false)
</pre></div>
</div>
<ul class="simple">
<li><p>A 64-bit value is represented with two 32-bit cells. Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>clock-frequency = &lt;0x00000001 0x00000000&gt;;
</pre></div>
</div>
<ul class="simple">
<li><p>A null-terminated string value is represented using double quotes
(the property value is considered to include the terminating NULL
character). Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>compatible = &quot;simple-bus&quot;;
</pre></div>
</div>
<ul class="simple">
<li><p>A bytestring is enclosed in square brackets [ ] with each byte
represented by two hexadecimal digits. Spaces between each byte are
optional. Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>local-mac-address = [00 00 12 34 56 78];
</pre></div>
</div>
<p>or equivalently:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>local-mac-address = [000012345678];
</pre></div>
</div>
<ul class="simple">
<li><p>Values may have several comma-separated components, which are
concatenated together. Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>compatible = &quot;ns16550&quot;, &quot;ns8250&quot;;
example = &lt;0xf00f0000 19&gt;, &quot;a strange property format&quot;;
</pre></div>
</div>
<ul class="simple">
<li><p>In a cell array a reference to another node will be expanded to that
node’s phandle. References may be &amp; followed by a node’s label.
Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupt-parent = &lt; &amp;mpic &gt;;
</pre></div>
</div>
<p>or they may be &amp; followed by a node’s full path in braces. Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>interrupt-parent = &lt; &amp;{/soc/interrupt-controller@40000} &gt;;
</pre></div>
</div>
<ul class="simple">
<li><p>Outside a cell array, a reference to another node will be expanded to
that node’s full path. Example:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethernet0 = &amp;EMAC0;
</pre></div>
</div>
<ul class="simple">
<li><p>Labels may also appear before or after any component of a property
value, or between cells of a cell array, or between bytes of a
bytestring. Examples:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>reg = reglabel: &lt;0 sizelabel: 0x1000000&gt;;
prop = [ab cd ef byte4: 00 ff fe];
str = start: &quot;string value&quot; end: ;
</pre></div>
</div>
</section>
<section id="file-layout">
<h3><span class="section-number">6.4. </span>File layout<a class="headerlink" href="#file-layout" title="Link to this heading">¶</a></h3>
<p><strong>Version 1 DTS files have the overall layout:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/dts-v1/;
[memory reservations]
    / {
        [property definitions]
        [child nodes]
    };
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/dts-v1/;</span></code> shall be present to identify the file as a version 1 DTS
(dts files without this tag will be treated by dtc as being in the
obsolete version 0, which uses a different format for integers in
addition to other small but incompatible changes).</p>
<p>Memory reservations (see <a class="reference internal" href="#document-chapter5-flattened-format#sect-fdt-memory-reservation-block"><span class="std std-numref">Section 5.3</span></a>)
are represented by lines in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/memreserve/ &lt;address&gt; &lt;length&gt;;
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;address&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code> are 64-bit C-style integers, e.g.,</p>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Reserve memory region 0x10000000..0x10003fff */</span>
<span class="k">/memreserve/</span> <span class="mh">0x10000000</span> <span class="mh">0x4000</span><span class="p">;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">/</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">};</span></code> section defines the root node of the devicetree, and
all the device tree data is contained within it.</p>
<p>C style (<code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">\*/</span></code>) and C++ style (<code class="docutils literal notranslate"><span class="pre">//</span></code>) comments are supported.</p>
</section>
</section>
<span id="document-references"></span><div role="list" class="citation-list">
<div class="citation" id="ieee1275" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>IEEE1275<span class="fn-bracket">]</span></span>
<p><em>Boot (Initialization Configuration) Firmware: Core Requirements
and Practices</em>, 1994, This is the core standard (also known as IEEE
1275) that defines the devicetree concept adopted by the DTSpec and
ePAPR. It is available from Global Engineering (<a class="reference external" href="http://global.ihs.com/">http://global.ihs.com/</a>).</p>
</div>
<div class="citation" id="b7" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>b7<span class="fn-bracket">]</span></span>
<p><em>Open Firmware Recommended Practice: Interrupt Mapping</em>, Version
0.9, Open Firmware Working Group, 1996
(<a class="reference external" href="http://devicetree.org/open-firmware/practice/imap/imap0_9d.pdf">http://devicetree.org/open-firmware/practice/imap/imap0_9d.pdf</a>)</p>
</div>
<div class="citation" id="chrp" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>CHRP<span class="fn-bracket">]</span></span>
<p><em>PowerPC Microprocessor Common Hardware Reference Platform
(CHRP) Binding</em>, Version 1.8, Open Firmware Working Group, 1998
(<a class="reference external" href="http://devicetree.org/open-firmware/bindings/chrp/chrp1_8a.ps">http://devicetree.org/open-firmware/bindings/chrp/chrp1_8a.ps</a>). This
document specifies the properties for Open PIC-compatible interrupt
controllers.</p>
</div>
<div class="citation" id="papr" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>PAPR<span class="fn-bracket">]</span></span>
<p><em>Power.org Standard for Power Architecture Platform
Requirements</em>, power.org</p>
</div>
<div class="citation" id="b18" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>b18<span class="fn-bracket">]</span></span>
<p><em>The Open Programmable Interrupt Controller (PIC) Register
Interface Specification Revision 1.2</em>, AMD and Cyrix, October 1995</p>
</div>
<div class="citation" id="epapr" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>EPAPR<span class="fn-bracket">]</span></span>
<p><em>Power.org Standard for Embedded Power Architecture
Platform Requirements</em>, power.org, 2011,
<a class="reference external" href="https://www.power.org/documentation/power-org-standard-for-embedded-power-architecture-platform-requirements-epapr-v1-1-2/">https://www.power.org/documentation/power-org-standard-for-embedded-power-architecture-platform-requirements-epapr-v1-1-2/</a></p>
</div>
<div class="citation" id="uefi" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>UEFI<span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://uefi.org/sites/default/files/resources/UEFI_Spec_2_8_A_Feb14.pdf">Unified Extensable Firmware Interface Specification v2.8 Errata A</a>,
February 2020, <a class="reference external" href="http://www.uefi.org">UEFI Forum</a></p>
</div>
</div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="#">
              <img class="logo" src="_static/devicetree-logo.svg" alt="Logo of Devicetree Specification"/>
            </a></p>
<h1 class="logo"><a href="#">Devicetree Specification</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=devicetree-org&repo=devicetree-specification&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter1-introduction">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter2-devicetree-basics">2. The Devicetree</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter3-devicenodes">3. Device Node Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter4-device-bindings">4. Device Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter5-flattened-format">5. Flattened Devicetree (DTB) Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-chapter6-source-language">6. Devicetree Source (DTS) Format (version 1)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2016,2017, devicetree.org.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.0.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>